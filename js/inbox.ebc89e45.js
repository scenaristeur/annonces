(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["inbox"],{e288:function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[null!=e.webId?t("div",[t("AclCheck",{attrs:{path:e.inboxAnnonceFolder,authorizations:e.authorizations,webId:e.webId}}),t("b-list-group",[e._v(" INBOX ( "+e._s(e.messages.length)+" messages ) "),e._l(e.messages,(function(n){return t("b-list-group-item",{key:n.url},[e._v(" "+e._s(n.created)+" / "+e._s(n.creator)+" : "),t("b",[e._v(e._s(n.annonce.title))]),e._v(" ::: "+e._s(n.text)+" "),t("b-button",{staticStyle:{"margin-left":"auto"},attrs:{variant:"light"},on:{click:function(t){return e.reply(n)}}},[t("b-icon",{attrs:{icon:"pen"}})],1),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.message-delete",modifiers:{"message-delete":!0}}],staticStyle:{"margin-left":"auto"},attrs:{variant:"danger"},on:{click:function(t){return e.showDeleteConfirm(n)}}},[t("b-icon",{attrs:{icon:"trash"}})],1)],1)})),t("b-modal",{attrs:{id:"message-delete",centered:"",title:"Delete"},on:{ok:e.onDelete}},[t("div",{staticClass:"p-3",domProps:{innerHTML:e._s(e.deleteMessage)}})])],2)],1):t("div",[e._v(" You must login to manage your annonces inbox. ")])])},o=[],a=t("1da1"),s=(t("96cf"),t("d3b7"),t("3ca3"),t("ddb0"),t("00e8")),i=t.n(s),c=t("7fed"),u=t.n(c),l=new u.a(i.a),d=window.solid,b={name:"AnnonceInbox",components:{AclCheck:function(){return t.e("chunk-3d0f94ce").then(t.bind(null,"77db"))}},data:function(){return{messages:[],deleteMessage:"",inboxAnnonceFolder:"",authorizations:[]}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.init();case 1:case"end":return n.stop()}}),n)})))()},methods:{init:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null==e.webId){n.next=13;break}return n.next=3,d.data.from(e.webId)[e.webId]["http://www.w3.org/ns/ldp#inbox"];case 3:return t=n.sent,n.next=6,"".concat(t);case 6:return n.t0=n.sent,e.inboxAnnonceFolder=n.t0+"annonces/",n.next=10,l.itemExists(e.inboxAnnonceFolder);case 10:if(n.sent){n.next=13;break}return n.next=13,l.createFolder(e.inboxAnnonceFolder);case 13:e.readInbox();case 14:case"end":return n.stop()}}),n)})))()},readInbox:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var t,r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(void 0!=e.inboxAnnonceFolder&&e.inboxAnnonceFolder.length>0)){n.next=20;break}return n.next=3,l.readFolder(e.inboxAnnonceFolder);case 3:t=n.sent,console.log(t),r=t.files.sort((function(e,n){return new Date(n.created).getTime()-new Date(e.created).getTime()})),e.messages=[];case 7:if(!(r.length>0)){n.next=20;break}return o=r.shift(),n.t0=JSON,n.next=12,l.readFile(o.url);case 12:return n.t1=n.sent,n.next=15,n.t0.parse.call(n.t0,n.t1);case 15:a=n.sent,a.url=o.url,e.messages.push(a),n.next=7;break;case 20:case"end":return n.stop()}}),n)})))()},onDelete:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("delete"),n.next=3,l.deleteFile(e.urlToDelete);case 3:e.readInbox();case 4:case"end":return n.stop()}}),n)})))()},showDeleteConfirm:function(e){this.deleteMessage="Do you want to delete <b>"+e.url+"</b>",this.urlToDelete=e.url}},watch:{webId:function(){this.init()}},computed:{webId:function(){return this.$store.state.solid.webId}}},m=b,w=t("2877"),f=Object(w["a"])(m,r,o,!1,null,null,null);n["default"]=f.exports}}]);
//# sourceMappingURL=inbox.ebc89e45.js.map