(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6855f128"],{"159b":function(t,e,a){var n=a("da84"),r=a("fdbc"),c=a("17c2"),s=a("9112");for(var o in r){var i=n[o],l=i&&i.prototype;if(l&&l.forEach!==c)try{s(l,"forEach",c)}catch(u){l.forEach=c}}},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,r=a("a640"),c=r("forEach");t.exports=c?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"77db":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h5",[t._v("Acl for "+t._s(t.path)+" : ")]),"OK"!=t.acl.status?a("div",[a("h5",[t._v("ACL / Authorization verification : ")]),a("b-badge",{attrs:{variant:t.acl.color}},[t._v(t._s(t.acl.status))]),a("b-badge",{attrs:{variant:t.acl.color}},[t._v(t._s(t.acl.message))]),a("p",[t._v(" To allow other Authenticated Users to send you inbox message, you have to set correct Authorizations for "),a("b-badge",{attrs:{variant:"warning"}},[t._v(t._s(t.path))]),t._v(" as i'm not sure the are good : "),a("ul",[a("li",[a("b-badge",{attrs:{variant:"warning"}},[t._v(t._s(t.webId))]),t._v(" with "),a("b-badge",{attrs:{variant:"warning"}},[t._v("CONTROL")])],1),a("li",[t._v(' AuthenticatedAgent as "Poster" for the folder & "Submitters" for it\'s content ')])]),a("br"),t._v(" "+t._s(t.acl.aclObject)+" ")],1),a("hr"),a("p",[t._v(" Acl for "),a("b-badge",{attrs:{variant:"warning"}},[t._v(t._s(t.path))]),a("b-list-group",t._l(t.acl.aclObject,(function(e,n){return a("b-list-group-item",{key:n},[e?a("div",[t._v(" aclAuth is ARRAY ? "+t._s(Array.isArray(e))+" "),t._l(Object.entries(e),(function(e,n){return a("div",{key:n},[e[1].mode?a("div",[a("h5",[t._v(t._s(e[0].split("&")[0])+" : "),a("b-badge",{attrs:{variant:"warning"}},[t._v(t._s(e[0].split("&")[1]))])],1),a("b",[t._v("Can :")]),a("b-badge",{attrs:{variant:1==e[1].mode.Read?"success":"danger"}},[t._v("READ")]),a("b-badge",{attrs:{variant:1==e[1].mode.Append?"success":"danger"}},[t._v("APPEND")]),a("b-badge",{attrs:{variant:1==e[1].mode.Write?"success":"danger"}},[t._v("WRITE")]),a("b-badge",{attrs:{variant:1==e[1].mode.Control?"success":"danger"}},[t._v("CONTROL")]),a("br"),a("b",[t._v("What ?")]),1==e[1].access.accessTo?a("b-badge",[t._v(t._s(t.path))]):t._e(),1==e[1].access.default?a("div",[t._v("content of "),a("b-badge",[t._v(" "+t._s(t.path))])],1):t._e(),a("br"),a("br")],1):a("div",[t._v(" "+t._s(e[1])+" should have mode ")])])}))],2):t._e()])})),1)],1),t._v(" You can do it manually at "),a("a",{attrs:{href:t.path,target:"_blank"}},[t._v(t._s(t.path))]),t._v(" or use this button. "),a("br"),"KO"==t.acl.status?a("b-button",{on:{click:t.setAcl}},[t._v("Set Authorization")]):t._e()],1):a("div",[t._v(" ACL OK "+t._s(t.acl)+" ")])])},r=[],c=a("1da1"),s=(a("159b"),a("96cf"),a("00e8")),o=a.n(s),i=a("7fed"),l=a.n(i),u=new l.a(o.a),d={name:"AclCheck",props:["path","authorizations","webId"],data:function(){return{acl:{status:"init",message:"I will check authorizations",color:"danger"}}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.init();case 1:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(null!=t.webId&&t.path.length>0)){e.next=13;break}return t.acl.status="imagining a annonce folder",console.log(t.webId,t.path),e.next=5,u.itemExists(t.path);case 5:if(e.sent){e.next=9;break}return t.acl.status="creating folder",e.next=9,u.createFolder(t.path);case 9:return e.next=11,t.checkAcl("first run");case 11:e.next=15;break;case 13:t.acl.status="KO",t.acl.message="NO ACL FOUND";case 15:case"end":return e.stop()}}),e)})))()},checkAcl:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.acl.status="checking if folder exist",e.acl.status="cheching authorizations",a.next=4,u.aclUrlParser(e.path);case 4:return e.acl.aclObject=a.sent,console.log(t,"aclObject on ",e.path,JSON.stringify(e.acl.aclObject,void 0,2)),a.next=8,u.acl.createContent(e.path,e.acl.aclObject);case 8:e.acl.aclContent=a.sent,console.log(t,"aclcontent on ",e.path,e.acl.aclContent),console.log(t,"aclon ",e.path,e.acl),e.acl.status="KO",console.log(e.acl.aclObject),e.acl.aclObject.forEach((function(t){console.log(t)}));case 14:case"end":return a.stop()}}),a)})))()},setAcl:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,n,r,c,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.acl.status="setting authorizations",e.next=4,u.acl.addUserMode({},[{agent:t.webId}],["Read","Write","Control"],["accessTo","default"]);case 4:return a=e.sent,e.next=7,u.acl.addUserMode(a,[{agentClass:"AuthenticatedAgent"}],["Append"],["default"]);case 7:return a=e.sent,e.next=10,u.acl.addUserMode({},[{agentClass:"AuthenticatedAgent"}],["Append","Read"],["accessTo"]);case 10:return n=e.sent,r=[a,n],e.next=14,u.acl.createContent(t.path,r);case 14:return c=e.sent,console.log("build an aclContent "+c),e.next=18,u.getItemLinks(t.path,{links:"include_possible"});case 18:return s=e.sent,o=s.acl,e.next=22,u.putFile(o,c,"text/turtle");case 22:return i=e.sent,console.log("result",i),e.next=26,t.checkAcl("after update");case 26:e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](0),t.acl.status="ERROR : "+e.t0,alert(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})))()}},watch:{webId:function(){this.init()},path:function(){this.init()}}},h=d,b=a("2877"),v=Object(b["a"])(h,n,r,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-6855f128.13af52de.js.map