{"version":3,"sources":["webpack:///./src/components/annonce/AnnonceAgora.vue?c4ec","webpack:///src/components/annonce/AnnonceAgora.vue","webpack:///./src/components/annonce/AnnonceAgora.vue?8d59","webpack:///./src/components/annonce/AnnonceAgora.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","model","value","callback","$$v","temp_url","expression","attrs","on","load","_v","_l","a","key","url","staticRenderFns","name","components","data","$store","state","annonce","agora_url","annonces","created","methods","watch","console","log","computed","get","set","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,gBAAgB,CAACE,YAAY,QAAQ,CAACF,EAAG,UAAU,CAACG,MAAM,CAACC,MAAOR,EAAY,SAAES,SAAS,SAAUC,GAAMV,EAAIW,SAASD,GAAKE,WAAW,cAAcR,EAAG,uBAAuB,CAACA,EAAG,WAAW,CAACS,MAAM,CAAC,QAAU,mBAAmBC,GAAG,CAAC,MAAQd,EAAIe,OAAO,CAACf,EAAIgB,GAAG,WAAW,IAAI,GAAGhB,EAAIgB,GAAG,sBAAsBZ,EAAG,eAAe,CAACS,MAAM,CAAC,QAAU,KAAKb,EAAIiB,GAAIjB,EAAY,UAAE,SAASkB,GAAG,OAAOd,EAAG,cAAc,CAACe,IAAID,EAAEE,IAAIP,MAAM,CAAC,QAAUK,QAAO,IAAI,IACniBG,EAAkB,G,0ICiCtB,eACA,eAEA,GACEC,KAAM,eACNC,WAAY,CACV,YAAe,WAAnB,yDAEEC,KALF,WAMI,MAAO,CACLb,SAAUV,KAAKwB,OAAOC,MAAMC,QAAQC,UACpCC,SAAN,KAGEC,QAXF,WAYI7B,KAAKc,QAEPgB,QAAS,CACP,KADJ,WACA,6LACA,uBACA,WACA,2EAHA,SAIA,gBAJA,OAIA,EAJA,OAKA,eACA,sGACA,eACA,cARA,aAUA,mCAVA,iBAWA,YAEA,gBAbA,qCAcA,EAdA,EAeA,oEACA,OACA,qCAjBA,iBAcA,+CAdA,8cA6BA,wBA7BA,iFAiCEC,MAAF,CACIJ,UADJ,WAEMK,QAAQC,IAAIjC,KAAK2B,WACjB3B,KAAKU,SAAWV,KAAK2B,YAKzBO,SAAF,CACIP,UAAW,CACTQ,IADN,WACA,4CACMC,IAFN,SAEA,mDChGqW,I,YCOjWC,EAAY,eACd,EACAvC,EACAsB,GACA,EACA,KACA,KACA,MAIa,aAAAiB,E","file":"js/chunk-2d2315f6.e45adad4.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-input-group',{staticClass:\"mt-3\"},[_c('b-input',{model:{value:(_vm.temp_url),callback:function ($$v) {_vm.temp_url=$$v},expression:\"temp_url\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"outline-success\"},on:{\"click\":_vm.load}},[_vm._v(\"Load\")])],1)],1),_vm._v(\" Agora's Annonces \"),_c('b-card-group',{attrs:{\"columns\":\"\"}},_vm._l((_vm.annonces),function(a){return _c('AnnonceCard',{key:a.url,attrs:{\"annonce\":a}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n\r\n    <b-input-group class=\"mt-3\">\r\n      <b-input v-model=\"temp_url\" />\r\n      <b-input-group-append>\r\n        <b-button variant=\"outline-success\" @click=\"load\">Load</b-button>\r\n\r\n      </b-input-group-append>\r\n    </b-input-group>\r\n    Agora's Annonces\r\n\r\n    <b-card-group columns>\r\n      <AnnonceCard :annonce=\"a\" v-for=\"a in annonces\" :key=\"a.url\" />\r\n\r\n    </b-card-group>\r\n\r\n\r\n    <!-- <b-list-group>\r\n    <b-list-group-item button v-for=\"a in annonces\" :key=\"a.url\">\r\n    <AnnonceLine :annonce=\"a\" />\r\n  </b-list-group-item>\r\n\r\n\r\n</b-list-group> -->\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport auth from 'solid-auth-client';\r\nimport FC from 'solid-file-client'\r\nconst fc = new FC( auth )\r\nlet ldflex = window.solid\r\n\r\nexport default {\r\n  name: \"AnnonceAgora\",\r\n  components: {\r\n    'AnnonceCard': () => import('@/components/annonce/AnnonceCard'),\r\n  },\r\n  data(){\r\n    return {\r\n      temp_url: this.$store.state.annonce.agora_url,\r\n      annonces : []\r\n    }\r\n  },\r\n  created(){\r\n    this.load()\r\n  },\r\n  methods: {\r\n    async  load() {\r\n      this.agora_url = this.temp_url\r\n      let date = new Date()\r\n      let path = [this.agora_url+date.getFullYear(), (\"0\" + (date.getMonth() + 1)).slice(-2)].join(\"/\")\r\n      let folder = await fc.readFolder(path)\r\n      console.log(folder)\r\n      let files = folder.files.sort((a,b) => new Date(b.modified).getTime() - new Date(a.modified).getTime());\r\n      console.log(files)\r\n      this.annonces = []\r\n\r\n      while (this.annonces.length < 100 && files.length > 0){\r\n        let f = files.shift()\r\n      //  console.log(f)\r\n        let resource = f.url+\"#this\"\r\n        for await (const annonce_url of ldflex.data[resource]['http://purl.org/dc/terms/hasPart']){\r\n          let idx = this.annonces.findIndex(x => x.url === `${annonce_url}`)\r\n          if (idx === -1) {\r\n            this.annonces.push({url: `${annonce_url}`})\r\n          }\r\n        }\r\n      }\r\n\r\n      // for await (const f of folder.files) {\r\n      //   annonces.push(JSON.parse(await fc.readFile(f.url)))\r\n      // }\r\n      //  await folder.files.map( function(x) {\r\n      //   let f =  fc.readFile(x.url)\r\n      //   return `${f}`\r\n      // })\r\n      console.log(this.annonces)\r\n    }\r\n  },\r\n\r\n  watch:{\r\n    agora_url(){\r\n      console.log(this.agora_url)\r\n      this.temp_url = this.agora_url\r\n\r\n    }\r\n  },\r\n\r\n  computed:{\r\n    agora_url: {\r\n      get () { return this.$store.state.annonce.agora_url},\r\n      set (url) { this.$store.commit('annonce/setAgoraUrl', url) }\r\n    }\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceAgora.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceAgora.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnonceAgora.vue?vue&type=template&id=03da4fde&\"\nimport script from \"./AnnonceAgora.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnonceAgora.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}