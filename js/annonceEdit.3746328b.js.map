{"version":3,"sources":["webpack:///./src/components/annonce/AnnonceEdit.vue?d0a0","webpack:///./src/components/annonce/Annonce.js","webpack:///src/components/annonce/AnnonceEdit.vue","webpack:///./src/components/annonce/AnnonceEdit.vue?7471","webpack:///./src/components/annonce/AnnonceEdit.vue","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/components/annonce/AnnonceEdit.vue?50b5","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","webId","_v","staticClass","attrs","getState","model","value","annonce","callback","$$v","$set","expression","_l","i","key","ref","dropzoneOptions","on","vfileAdded","vsuccess","verror","vremoved","vsending","vsuccessMuliple","vsendingMuliple","vqueueComplete","path","_s","$event","add","goBack","staticRenderFns","Annonce","id","uuidv4","title","category","description","price","currency","console","log","name","components","data","files","numberOfFiles","url","maxFilesize","headers","addRemoveLinks","autoQueue","methods","file","vfileAdded1","origFile","MAX_WIDTH","MAX_HEIGHT","reader","FileReader","addEventListener","origImg","Image","src","event","target","result","width","height","dropzone","enqueueFile","canvas","document","createElement","ctx","getContext","drawImage","resizedFile","app","base64ToFile","toDataURL","origFileIndex","indexOf","readAsDataURL","length","alert","$store","dispatch","$router","push","go","imagesUploaded","images","byteString","mimestring","atob","dataURI","split","decodeURI","content","Array","charCodeAt","newFile","File","origProps","forEach","p","computed","annoncesMy","state","solid","component","$","$find","find","addToUnscopables","FIND","SKIPS_HOLES","proto","forced","callbackfn","arguments","undefined","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","test","byteToHex","toString","substr","stringify","arr","offset","toLowerCase","TypeError","v4","options","buf","rnds","random"],"mappings":"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","file":"js/annonceEdit.3746328b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[(_vm.webId != null)?_c('div',[_c('h3',[_vm._v(\"Add an Annonce\")]),_c('div',{staticClass:\"d-flex\"},[_c('b-button',{staticClass:\"ml-auto\",attrs:{\"variant\":\"info\",\"to\":\"/my_annonces\"}},[_vm._v(\"My annonces\")])],1),_c('b-form',[_c('b-form-group',{attrs:{\"id\":\"input-group-title\",\"label\":\"Title:\",\"label-for\":\"input-title\",\"description\":\"Your annonce / 'small ad' need a explicit title.\"}},[_c('b-form-input',{attrs:{\"id\":\"input-title\",\"state\":_vm.getState(),\"autofocus\":\"\",\"placeholder\":\"Enter annonce title\",\"required\":\"\"},model:{value:(_vm.annonce.title),callback:function ($$v) {_vm.$set(_vm.annonce, \"title\", $$v)},expression:\"annonce.title\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-category\",\"label\":\"Categories:\",\"label-for\":\"input-category\",\"description\":\"Please add 1 to 3 categories to specify where to find your annonce.\"}},[_c('b-form-input',{attrs:{\"id\":\"input-category\",\"placeholder\":\"3 categories max, comma separated\"},model:{value:(_vm.annonce.category),callback:function ($$v) {_vm.$set(_vm.annonce, \"category\", $$v)},expression:\"annonce.category\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-category\",\"label\":\"Description:\",\"label-for\":\"input-description\",\"description\":\"Please give a clear description.\"}},[_c('b-textarea',{attrs:{\"id\":\"input-description\",\"placeholder\":\"Description\",\"rows\":\"7\"},model:{value:(_vm.annonce.description),callback:function ($$v) {_vm.$set(_vm.annonce, \"description\", $$v)},expression:\"annonce.description\"}})],1),_c('b-form',{attrs:{\"inline\":\"\"}},[_c('label',{staticClass:\"mr-sm-2\",attrs:{\"for\":\"input-price\"}},[_vm._v(\"Price:\")]),_c('b-input',{staticClass:\"mr-sm-2\",attrs:{\"id\":\"input-price\",\"placeholder\":\"price\"},model:{value:(_vm.annonce.price),callback:function ($$v) {_vm.$set(_vm.annonce, \"price\", $$v)},expression:\"annonce.price\"}}),_c('label',{staticClass:\"mr-sm-2\",attrs:{\"for\":\"input-currency\"}},[_vm._v(\"Currency:\")]),_c('b-input',{staticClass:\"mr-sm-2\",attrs:{\"id\":\"input-currency\",\"placeholder\":\"currency (€,$...)\"},model:{value:(_vm.annonce.currency),callback:function ($$v) {_vm.$set(_vm.annonce, \"currency\", $$v)},expression:\"annonce.currency\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-images\",\"label\":\"Images:\",\"label-for\":\"input-images\",\"description\":\"Add some images for a better description & visibility\"}}),_c('div',_vm._l((_vm.annonce.images),function(i){return _c('b-img',{key:i,attrs:{\"src\":i,\"width\":\"200px\",\"fluid\":\"\",\"thumbnail\":\"\",\"alt\":i}})}),1),_c('vueDropzone',{ref:\"myVueDropzone\",attrs:{\"id\":\"dropzone\",\"options\":_vm.dropzoneOptions,\"duplicateCheck\":true},on:{\"vdropzone-file-added\":_vm.vfileAdded,\"vdropzone-success\":_vm.vsuccess,\"vdropzone-error\":_vm.verror,\"vdropzone-removed-file\":_vm.vremoved,\"vdropzone-sending\":_vm.vsending,\"vdropzone-success-multiple\":_vm.vsuccessMuliple,\"vdropzone-sending-multiple\":_vm.vsendingMuliple,\"vdropzone-queue-complete\":_vm.vqueueComplete}}),_c('p',[_vm._v(\"Files will be automatically upload at \"),_c('small',[_c('a',{attrs:{\"href\":_vm.path,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.path))])])]),_c('div',{staticClass:\"d-flex\"},[_c('b-button',{staticClass:\"ml-auto\",attrs:{\"variant\":\"info\",\"disbled\":\"numberOfFiles != 0\"},on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"save\")]),_c('b-button',{staticClass:\"ml-2\",attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.goBack()}}},[_vm._v(\"back\")])],1)],1)],1):_c('div',[_vm._v(\" You must login to manage your annonces. \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { v4 as uuidv4 } from 'uuid';\r\n\r\nexport class Annonce {\r\n  constructor(){\r\n    this.id = uuidv4()\r\n    this.title = \"\"\r\n    this.category = \"\"\r\n    this.description = \"\"\r\n    this.price = null\r\n    this.currency = null\r\n    console.log('new annonce', this)\r\n  }\r\n\r\n}\r\n","<template>\r\n  <b-container>\r\n    <div v-if=\"webId != null\">\r\n      <h3>Add an Annonce</h3>\r\n      <div class=\"d-flex\">\r\n        <b-button variant=\"info\" class=\"ml-auto\" to=\"/my_annonces\">My annonces</b-button>\r\n      </div>\r\n      <b-form>\r\n\r\n        <b-form-group\r\n        id=\"input-group-title\"\r\n        label=\"Title:\"\r\n        label-for=\"input-title\"\r\n        description=\"Your annonce / 'small ad' need a explicit title.\"\r\n        >\r\n        <b-form-input\r\n        id=\"input-title\"\r\n        v-model=\"annonce.title\" :state=\"getState()\" autofocus\r\n        placeholder=\"Enter annonce title\"\r\n        required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n\r\n\r\n      <!-- <b-input placeholder=\"title\" v-model=\"annonce.title\" :state=\"getState()\" autofocus /> -->\r\n\r\n      <b-form-group\r\n      id=\"input-group-category\"\r\n      label=\"Categories:\"\r\n      label-for=\"input-category\"\r\n      description=\"Please add 1 to 3 categories to specify where to find your annonce.\"\r\n      >\r\n      <b-form-input\r\n      id=\"input-category\"\r\n      placeholder=\"3 categories max, comma separated\"\r\n      v-model=\"annonce.category\"\r\n      ></b-form-input>\r\n    </b-form-group>\r\n\r\n    <!-- <b-input placeholder=\"3 categories max, comma separated\" v-model=\"annonce.category\" /> -->\r\n\r\n\r\n\r\n    <b-form-group\r\n    id=\"input-group-category\"\r\n    label=\"Description:\"\r\n    label-for=\"input-description\"\r\n    description=\"Please give a clear description.\"\r\n    >\r\n    <b-textarea id=\"input-description\" placeholder=\"Description\" v-model=\"annonce.description\"  rows=\"7\"/>\r\n    <!-- <b-form-input\r\n    id=\"input-category\"\r\n    placeholder=\"3 categories max, comma separated\"\r\n    v-model=\"annonce.category\"\r\n    required\r\n    ></b-form-input> -->\r\n  </b-form-group>\r\n\r\n  <b-form inline>\r\n    <label class=\"mr-sm-2\" for=\"input-price\">Price:</label>\r\n    <b-input id=\"input-price\" placeholder=\"price\" v-model=\"annonce.price\" class=\"mr-sm-2\" />\r\n    <label class=\"mr-sm-2\" for=\"input-currency\">Currency:</label>\r\n    <b-input id=\"input-currency\" placeholder=\"currency (€,$...)\" v-model=\"annonce.currency\" class=\"mr-sm-2\" />\r\n  </b-form>\r\n  <!-- <b-button variant=\"light\" @click=\"addField()\" style=\"margin-left:auto;\">\r\n  <b-icon icon=\"plus\"></b-icon>\r\n</b-button> -->\r\n\r\n\r\n\r\n<b-form-group\r\nid=\"input-group-images\"\r\nlabel=\"Images:\"\r\nlabel-for=\"input-images\"\r\ndescription=\"Add some images for a better description & visibility\"\r\n>\r\n\r\n\r\n\r\n\r\n<!-- @vdropzone-success-multiple=\"vsuccessMuliple\"\r\n@vdropzone-sending-multiple=\"vsendingMuliple\"\r\n@vdropzone-queue-complete=\"vqueueComplete\"\r\n@vdropzone-total-upload-progress=\"vprogress\"\r\n@vdropzone-mounted=\"vmounted\"\r\n@vdropzone-drop=\"vddrop\"\r\n@vdropzone-drag-start=\"vdstart\"\r\n@vdropzone-drag-end=\"vdend\"\r\n@vdropzone-drag-enter=\"vdenter\"\r\n@vdropzone-drag-over=\"vdover\"\r\n@vdropzone-drag-leave=\"vdleave\"\r\n@vdropzone-duplicate-file=\"vdduplicate\" -->\r\n<!-- <vueDropzone ref=\"myVueDropzone\" id=\"dropzone\" :options=\"dropzoneOptions\"></vueDropzone> -->\r\n<!-- <Upload id=\"input-images\" :images=\"annonce.images\" @imagesUploaded=\"imagesUploaded\"/> -->\r\n\r\n<!-- <b-form-input\r\nid=\"input-title\"\r\nv-model=\"annonce.title\" :state=\"getState()\" autofocus\r\nplaceholder=\"Enter annonce title\"\r\nrequired\r\n></b-form-input> -->\r\n</b-form-group>\r\n<!-- <p>If you add images, don't forget to hit the \"send\" button before hitting the \"save\" one.</p> -->\r\n\r\n\r\n<div>\r\n<!-- <img v-for=\"i in annonce.images\" :key=\"i\" :src=\"i\" width=\"200px\" /> -->\r\n<b-img v-for=\"i in annonce.images\" :key=\"i\" :src=\"i\" width=\"200px\" fluid thumbnail  :alt=\"i\"></b-img>\r\n\r\n</div>\r\n\r\n<vueDropzone ref=\"myVueDropzone\" id=\"dropzone\"\r\n@vdropzone-file-added=\"vfileAdded\"\r\n@vdropzone-success=\"vsuccess\"\r\n@vdropzone-error=\"verror\"\r\n@vdropzone-removed-file=\"vremoved\"\r\n@vdropzone-sending=\"vsending\"\r\n@vdropzone-success-multiple=\"vsuccessMuliple\"\r\n@vdropzone-sending-multiple=\"vsendingMuliple\"\r\n@vdropzone-queue-complete=\"vqueueComplete\"\r\n\r\n\r\n:options=\"dropzoneOptions\"\r\n:duplicateCheck=\"true\">\r\n</vueDropzone>\r\n<p>Files will be automatically upload at <small><a :href=\"path\" target=\"_blank\">{{ path }}</a></small></p>\r\n\r\n\r\n\r\n\r\n<div class=\"d-flex\" >\r\n\r\n  <b-button class=\"ml-auto\" variant=\"info\" @click=\"add()\" disbled=\"numberOfFiles != 0\">save</b-button>\r\n  <b-button class=\"ml-2\" variant=\"secondary\" @click=\"goBack()\">back</b-button>\r\n</div>\r\n</b-form>\r\n\r\n\r\n\r\n<!-- <Pica /> -->\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n</div>\r\n<div v-else>\r\n  You must login to manage your annonces.\r\n</div>\r\n</b-container>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nlet ldflex = window.solid\r\nimport FC from 'solid-file-client'\r\nconst fc = new FC( window.solid.auth )\r\nimport watermark from 'watermarkjs'\r\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css'\r\n//dropzone with pica https://stackoverflow.com/questions/66441805/using-dropzone-js-with-pica-or-other-image-compression-resize-libraries\r\n// custom preview https://rowanwins.github.io/vue-dropzone/docs/dist/index.html#/custom-preview\r\n\r\nimport {Annonce} from './Annonce'\r\n\r\n\r\nexport default {\r\n  name: \"AnnonceEdit\",\r\n  components: {\r\n    //  'Upload': () => import('@/components/portfolio/Upload'),\r\n    'vueDropzone': () => import('vue2-dropzone'),\r\n    //  'Pica': () => import('@/components/annonce/Pica')\r\n  },\r\n  data(){\r\n    return{\r\n      annonce: null,\r\n      files: null,\r\n      path: \"\",\r\n      numberOfFiles: 0,\r\n      dropzoneOptions: {\r\n        url: 'https://spoggy-test4.solidcommunity.net/public/portfolio/',\r\n        //thumbnailWidth: 200,\r\n        maxFilesize: 1,\r\n        headers: { \"withCredentials\": true },\r\n        addRemoveLinks: true,\r\n        //  resizeWidth: 200,\r\n        autoQueue: false,\r\n        //  resizeHeight: 400,\r\n      },\r\n      // fileAdded: false,\r\n      // filesAdded: false,\r\n      // success: false,\r\n      // error: false,\r\n      // removedFile: false,\r\n      // sending: false,\r\n      // successMultiple: false,\r\n      // sendingMultiple: false,\r\n      // queueComplete: false,\r\n      // uploadProgress: false,\r\n      // progress: false,\r\n      // myProgress: 0,\r\n      // isMounted: false,\r\n      // dDrop: false,\r\n      // dStarted: false,\r\n      // dEnded: false,\r\n      // dEntered: false,\r\n      // dOver: false,\r\n      // dLeave: false,\r\n      // dDuplicate:false\r\n    }\r\n  },\r\n  async created(){\r\n    console.log(this.$route.params.id)\r\n    this.annonce = this.$route.params.id != undefined ?  this.annoncesMy.find(x => x.id === this.$route.params.id): new Annonce()\r\n    this.annonce.images == undefined ? this.annonce.images = [] : \"\"\r\n    let storage = await ldflex.data.user.storage\r\n    this.path = `${storage}`+'public/portfolio/'\r\n    //  this.$refs.myVueDropzone.options.url =this.path\r\n\r\n  },\r\n  methods: {\r\n    // vfileAdded(file){\r\n    //   console.log(file)\r\n    // },\r\n    async vsuccess(file){\r\n      console.log(file)\r\n      //  this.files.push(file)\r\n\r\n      //  this.annonce.images = images\r\n    },\r\n    verror(file){\r\n      console.log(file)\r\n    },\r\n    vremoved(file){\r\n      console.log(file)\r\n    },\r\n    async vsending1(file){\r\n      console.log(file)\r\n    },\r\n    async vsending(file){\r\n      console.log(file)\r\n      this.numberOfFiles--\r\n      try{\r\n        console.log(\"success\", this.numberOfFiles,file)\r\n        let uri = encodeURI(this.path+file.name)\r\n        console.log(uri)\r\n\r\n        watermark([file])\r\n        .image(watermark.text.center(this.path, '30px Josefin Slab', '#fff', 0.8))\r\n        //.then(img => {\r\n        // img.name = f.name\r\n        // img.type = f.type\r\n        // img.width = \"250\"\r\n        // img.height = \"250\"\r\n        // preview.appendChild(img)});\r\n\r\n        //  !app.images.includes(uri) ? app.images.push(uri): \"\"\r\n        //  var file = dataURLtoFile(i.src,i.name);\r\n\r\n        await fc.createFile(uri, file, file.type)\r\n        this.annonce.images.push(uri)\r\n      }catch(e){\r\n        alert(e)\r\n      }\r\n    },\r\n    vsuccessMuliple(files){\r\n      console.log(\"MUILTIPLE SUCCESS\",files)\r\n    },\r\n    vsendingMuliple(files){\r\n      console.log(\"MULTIPLE SENDING\",files)\r\n    },\r\n    vqueueComplete(files){\r\n      console.log(\"QUEUE COMPLETE\",files)\r\n    },\r\n    vfileAdded1(origFile) {\r\n      console.log(origFile)\r\n    },\r\n\r\n    vfileAdded(origFile) {\r\n      this.numberOfFiles++\r\n      //https://stackoverflow.com/questions/20533191/dropzone-js-client-side-image-resizing\r\n      let dropzone = this.$refs.myVueDropzone\r\n      //  console.log(\"DZ1\", dropzone)\r\n      let app = this\r\n      var MAX_WIDTH  = 1024;\r\n      var MAX_HEIGHT = 768;\r\n\r\n      console.log(\"Orig\",origFile)\r\n\r\n      var reader = new FileReader();\r\n\r\n      // Convert file to img\r\n\r\n      reader.addEventListener(\"load\", function(event) {\r\n\r\n        var origImg = new Image();\r\n        origImg.src = event.target.result;\r\n\r\n        origImg.addEventListener(\"load\", function(event) {\r\n\r\n          var width  = event.target.width;\r\n          var height = event.target.height;\r\n\r\n\r\n          // Don't resize if it's small enough\r\n\r\n          if (width <= MAX_WIDTH && height <= MAX_HEIGHT) {\r\n            // dropzone.enqueueFile(origFile);\r\n            //https://stackoverflow.com/questions/48225489/how-can-i-enqueue-a-file-manually-in-dropzone-vue-dropzone-2\r\n            dropzone.dropzone.enqueueFile(origFile)\r\n            return;\r\n          }\r\n\r\n\r\n          // Calc new dims otherwise\r\n\r\n          if (width > height) {\r\n            if (width > MAX_WIDTH) {\r\n              height *= MAX_WIDTH / width;\r\n              width = MAX_WIDTH;\r\n            }\r\n          } else {\r\n            if (height > MAX_HEIGHT) {\r\n              width *= MAX_HEIGHT / height;\r\n              height = MAX_HEIGHT;\r\n            }\r\n          }\r\n\r\n\r\n          // Resize\r\n          //  alert(\"resize\")\r\n\r\n          var canvas = document.createElement('canvas');\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n\r\n          var ctx = canvas.getContext(\"2d\");\r\n          ctx.drawImage(origImg, 0, 0, width, height);\r\n\r\n          var resizedFile = app.base64ToFile(canvas.toDataURL(), origFile);\r\n\r\n          console.log(\"resized\",resizedFile)\r\n\r\n          // Replace original with resized\r\n          console.log(dropzone)\r\n          var origFileIndex = dropzone.dropzone.files.indexOf(origFile);\r\n          dropzone.dropzone.files[origFileIndex] = resizedFile;\r\n\r\n\r\n          // Enqueue added file manually making it available for\r\n          // further processing by dropzone\r\n          //    console.log(\"DZ\",dropzone)\r\n\r\n          //  dropzone.enqueueFile(resizedFile);\r\n          //https://stackoverflow.com/questions/48225489/how-can-i-enqueue-a-file-manually-in-dropzone-vue-dropzone-2\r\n          dropzone.dropzone.enqueueFile(resizedFile)\r\n        });\r\n      });\r\n\r\n      reader.readAsDataURL(origFile);\r\n    },\r\n\r\n\r\n\r\n    add() {\r\n      if (this.annonce.title.length < 1){\r\n        alert(\"Title must not be empty !\")\r\n        return\r\n      }\r\n      console.log(this.annonce)\r\n      this.$store.dispatch('annonce/update', this.annonce)\r\n      //  this.$router.go(-1)\r\n      this.$router.push('/inbox')\r\n    },\r\n    goBack(){\r\n      this.$router.go(-1)\r\n    },\r\n    getState() {\r\n      return this.annonce.title.length > 0;\r\n    },\r\n    imagesUploaded(images){\r\n      console.log(images)\r\n      this.annonce.images = images\r\n    },\r\n    base64ToFile(dataURI, origFile) {\r\n      var byteString, mimestring;\r\n\r\n      if(dataURI.split(',')[0].indexOf('base64') !== -1 ) {\r\n        byteString = atob(dataURI.split(',')[1]);\r\n      } else {\r\n        byteString = decodeURI(dataURI.split(',')[1]);\r\n      }\r\n\r\n      mimestring = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n\r\n      var content = new Array();\r\n      for (var i = 0; i < byteString.length; i++) {\r\n        content[i] = byteString.charCodeAt(i);\r\n      }\r\n\r\n      var newFile = new File(\r\n        [new Uint8Array(content)], origFile.name, {type: mimestring}\r\n      );\r\n\r\n\r\n      // Copy props set by the dropzone in the original file\r\n\r\n      var origProps = [\r\n        \"upload\", \"status\", \"previewElement\", \"previewTemplate\", \"accepted\"\r\n      ];\r\n\r\n      origProps.forEach((p) => {\r\n        newFile[p] = origFile[p];\r\n      });\r\n\r\n      return newFile;\r\n    }\r\n  },\r\n  computed:{\r\n    annoncesMy() {\r\n      return this.$store.state.annonce.annoncesMy\r\n    },\r\n    webId() {\r\n      return this.$store.state.solid.webId\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n/* .dz-success-mark, */\r\n#dropzone  .dz-error-mark, .dz-remove {\r\n  display: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnonceEdit.vue?vue&type=template&id=53fc9654&\"\nimport script from \"./AnnonceEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnonceEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AnnonceEdit.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceEdit.vue?vue&type=style&index=0&lang=css&\"","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;"],"sourceRoot":""}