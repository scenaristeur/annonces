{"version":3,"sources":["webpack:///./src/components/annonce/AnnonceDetail.vue?3703","webpack:///src/components/annonce/AnnonceDetail.vue","webpack:///./src/components/annonce/AnnonceDetail.vue?51ed","webpack:///./src/components/annonce/AnnonceDetail.vue","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","a","title","_l","category","split","c","i","key","price","currency","description","error","length","webId","undefined","creator","directives","name","rawName","modifiers","date","Date","toLocaleDateString","_e","_m","on","onSend","model","value","message","callback","$$v","$set","expression","staticRenderFns","data","methods","computed","$store","state","solid","component","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","test","byteToHex","push","toString","substr","stringify","arr","offset","arguments","toLowerCase","TypeError","v4","options","buf","rnds","random"],"mappings":"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","file":"js/detail.ae31d69f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-card',{staticClass:\"mb-2\",attrs:{\"tag\":\"article\",\"button\":\"\"}},[_c('b-card-title',{staticClass:\"d-flex justify-content-between align-items-center\"},[_c('span',[_vm._v(_vm._s(_vm.a.title))]),_c('b-card-sub-title',_vm._l((_vm.a.category.split(',')),function(c,i){return _c('b-badge',{key:i,staticClass:\"mr-3\",attrs:{\"variant\":\"primary\",\"pill\":\"\"}},[_vm._v(_vm._s(c))])}),1),_c('b-card-text',[_vm._v(\" \"+_vm._s(_vm.a.price)+\" \"+_vm._s(_vm.a.currency)+\" \")])],1),_c('b-card-text',[_vm._v(\" \"+_vm._s(_vm.a.description)+\" \")]),(_vm.error.length == 0)?_c('b-alert',{attrs:{\"show\":\"\"}},[(_vm.webId != null && _vm.a.creator != undefined)?_c('div',[_vm._v(\" Contact : \"),_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal-contact\",modifiers:{\"modal-contact\":true}}],attrs:{\"variant\":\"info\"}},[_vm._v(_vm._s(_vm.a.creator.split('/')[2]))])],1):_c('div',[_vm._v(\" You must login to contact the creator of this annonce. \")])]):_c('b-alert',{attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_vm._v(\" \"+_vm._s(_vm.error)+\" \"),_c('b-button',{attrs:{\"variant\":\"danger\",\"to\":\"/\"}},[_vm._v(\"Back to Annonces List\")])],1),(_vm.a.date != undefined)?_c('small',[_vm._v(_vm._s(new Date(_vm.a.date).toLocaleDateString()))]):_vm._e(),_c('hr'),_vm._l((_vm.a.images),function(i){return _c('b-img',{key:i,attrs:{\"src\":i,\"width\":\"200px\",\"fluid\":\"\",\"thumbnail\":\"\",\"alt\":i}})})],2),_vm._m(0),_c('b-modal',{attrs:{\"id\":\"modal-contact\",\"centered\":\"\",\"title\":\"Send a message\",\"size\":\"lg\"},on:{\"ok\":_vm.onSend}},[_c('b-form-textarea',{attrs:{\"id\":\"textarea\",\"placeholder\":'Enter your message to '+ _vm.a.creator,\"rows\":\"3\",\"max-rows\":\"6\"},model:{value:(_vm.message.text),callback:function ($$v) {_vm.$set(_vm.message, \"text\", $$v)},expression:\"message.text\"}})],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('small',[_vm._v(\"Todo: Caroussel with some annonce suggestion from same categories.\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n\r\n    <b-card\r\n    tag=\"article\"\r\n    class=\"mb-2\"\r\n    button\r\n    >\r\n\r\n    <b-card-title class=\"d-flex justify-content-between align-items-center\">\r\n\r\n      <span>{{a.title}}</span>\r\n      <b-card-sub-title >\r\n        <b-badge variant=\"primary\"  v-for=\"(c, i) in a.category.split(',')\" :key=\"i\"  pill class=\"mr-3\">{{c}}</b-badge>\r\n      </b-card-sub-title>\r\n      <b-card-text>\r\n        {{a.price}} {{a.currency}}\r\n\r\n      </b-card-text>\r\n    </b-card-title>\r\n\r\n\r\n    <b-card-text>\r\n      {{ a.description }}\r\n    </b-card-text>\r\n\r\n\r\n    <b-alert v-if=\"error.length == 0\" show>\r\n      <div v-if=\"webId != null && a.creator != undefined\">\r\n        Contact : <b-button v-b-modal.modal-contact variant=\"info\">{{ a.creator.split('/')[2] }}</b-button>\r\n      </div>\r\n      <div v-else>\r\n        You must login to contact the creator of this annonce.\r\n      </div>\r\n    </b-alert>\r\n    <b-alert v-else show variant=\"danger\">\r\n      {{ error }}\r\n\r\n      <b-button variant=\"danger\" to=\"/\">Back to Annonces List</b-button>\r\n    </b-alert>\r\n\r\n    <small v-if=\"a.date != undefined\">{{new Date(a.date).toLocaleDateString()}}</small>\r\n<hr>\r\n    <!-- <div v-for=\"i in a.images\" :key=\"i\">\r\n      <b-card-img :src=\"i\" alt=\"Image\"   style=\"max-width: 20rem;\"\r\n      class=\"mb-2\" bottom></b-card-img>\r\n    </div> -->\r\n    <b-img v-for=\"i in a.images\" :key=\"i\" :src=\"i\" width=\"200px\" fluid thumbnail :alt=\"i\"></b-img>\r\n    <!-- {{ a.images }} -->\r\n\r\n  </b-card>\r\n\r\n  <p>\r\n  <small>Todo: Caroussel with some annonce suggestion from same categories.</small>\r\n\r\n  </p>\r\n\r\n\r\n  <b-modal id=\"modal-contact\" centered title=\"Send a message\" @ok=\"onSend\" size=\"lg\">\r\n\r\n    <b-form-textarea\r\n    id=\"textarea\"\r\n    v-model=\"message.text\"\r\n    :placeholder=\"'Enter your message to '+ a.creator\"\r\n    rows=\"3\"\r\n    max-rows=\"6\"\r\n    ></b-form-textarea>\r\n  </b-modal>\r\n\r\n</div>\r\n\r\n<!-- <b-button variant=\"outline-info\"> -->\r\n<!-- </b-button>\r\n{{ a}}\r\n</div> -->\r\n</template>\r\n\r\n<script>\r\nimport auth from 'solid-auth-client';\r\nimport FC from 'solid-file-client'\r\nconst fc = new FC( auth )\r\nlet ldflex = window.solid\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n\r\nexport default {\r\n  name: \"AnnonceDetail\",\r\n  data(){\r\n    return {\r\n      a: {category: \"\"},\r\n      message: {},\r\n      error : \"\"\r\n    }\r\n  },\r\n  async created(){\r\n    let url = this.$route.query.url\r\n    console.log(url)\r\n    if (url == undefined){ this.$router.push({path: '/'}) }else{\r\n      try{\r\n        this.a = JSON.parse(await fc.readFile(url))\r\n        this.a.image = this.a.images[0] || \"https://picsum.photos/400/200/?image=41\"\r\n        this.a.date = this.a.modified.pop() || this.a.created\r\n        let inboxFolder = await ldflex.data.from(this.a.creator)[this.a.creator]['http://www.w3.org/ns/ldp#inbox']\r\n        this.inboxAnnonce = `${inboxFolder}`+\"annonces/\"\r\n      }catch(e){\r\n        this.error = e+ \"... \\n There is no annonce at \\n\"+url\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async onSend() {\r\n      this.message.annonce = this.a\r\n      this.message.creator = this.webId\r\n      this.message.created = new Date().toISOString()\r\n      console.log(this.message)\r\n      console.log(this.inboxAnnonce)\r\n      let file = this.inboxAnnonce+uuidv4()+\".json\"\r\n\r\n\r\n      // let aclObject = await fc.aclUrlParser(this.inboxAnnonce)\r\n      // console.log(\"inherit acl\",aclObject)\r\n\r\n      try{\r\n        await fc.postFile(file, JSON.stringify(this.message), \"application/json\")\r\n        alert(\"Message send to \"+this.message.annonce.creator)\r\n      }catch(e){\r\n        alert(\"Sorry but i can not send message, \"+e)\r\n      }\r\n      this.message.text = \"\"\r\n\r\n    }\r\n  },\r\n  computed:{\r\n    webId() {\r\n      return this.$store.state.solid.webId\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnonceDetail.vue?vue&type=template&id=0800d6a6&\"\nimport script from \"./AnnonceDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnonceDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;"],"sourceRoot":""}