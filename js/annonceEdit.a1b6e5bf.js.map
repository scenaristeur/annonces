{"version":3,"sources":["webpack:///./src/components/annonce/AnnonceEdit.vue?167d","webpack:///./src/components/annonce/Annonce.js","webpack:///src/components/annonce/AnnonceEdit.vue","webpack:///./src/components/annonce/AnnonceEdit.vue?7471","webpack:///./src/components/annonce/AnnonceEdit.vue","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","webId","_v","attrs","getState","model","value","annonce","callback","$$v","$set","expression","staticClass","images","on","imagesUploaded","$event","add","goBack","ref","dropzoneOptions","vfileAdded","vsuccess","verror","vremoved","vsending","staticRenderFns","Annonce","id","uuidv4","title","category","description","price","currency","console","log","name","components","data","files","url","thumbnailWidth","maxFilesize","headers","addRemoveLinks","resizeWidth","created","$route","params","undefined","methods","file","MAX_WIDTH","MAX_HEIGHT","reader","FileReader","addEventListener","origImg","Image","src","event","target","result","width","height","dropzone","enqueueFile","origFile","canvas","document","createElement","ctx","getContext","drawImage","resizedFile","base64ToFile","toDataURL","origFileIndex","indexOf","readAsDataURL","length","alert","$store","dispatch","$router","go","byteString","mimestring","atob","dataURI","split","decodeURI","content","Array","i","charCodeAt","newFile","File","origProps","forEach","p","computed","annoncesMy","state","solid","component","$","$find","find","addToUnscopables","FIND","SKIPS_HOLES","proto","forced","callbackfn","arguments","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","validate","uuid","test","byteToHex","push","toString","substr","stringify","arr","offset","toLowerCase","TypeError","v4","options","buf","rnds","random"],"mappings":"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","file":"js/annonceEdit.a1b6e5bf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[(_vm.webId != null)?_c('div',[_c('h3',[_vm._v(\"Add an Annonce\")]),_c('b-form',[_c('b-form-group',{attrs:{\"id\":\"input-group-title\",\"label\":\"Title:\",\"label-for\":\"input-title\",\"description\":\"Your annonce / 'small ad' need a explicit title.\"}},[_c('b-form-input',{attrs:{\"id\":\"input-title\",\"state\":_vm.getState(),\"autofocus\":\"\",\"placeholder\":\"Enter annonce title\",\"required\":\"\"},model:{value:(_vm.annonce.title),callback:function ($$v) {_vm.$set(_vm.annonce, \"title\", $$v)},expression:\"annonce.title\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-category\",\"label\":\"Categories:\",\"label-for\":\"input-category\",\"description\":\"Please add 1 to 3 categories to specify where to find your annonce.\"}},[_c('b-form-input',{attrs:{\"id\":\"input-category\",\"placeholder\":\"3 categories max, comma separated\"},model:{value:(_vm.annonce.category),callback:function ($$v) {_vm.$set(_vm.annonce, \"category\", $$v)},expression:\"annonce.category\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-category\",\"label\":\"Description:\",\"label-for\":\"input-description\",\"description\":\"Please give a clear description.\"}},[_c('b-textarea',{attrs:{\"id\":\"input-description\",\"placeholder\":\"Description\",\"rows\":\"7\"},model:{value:(_vm.annonce.description),callback:function ($$v) {_vm.$set(_vm.annonce, \"description\", $$v)},expression:\"annonce.description\"}})],1),_c('b-form',{attrs:{\"inline\":\"\"}},[_c('label',{staticClass:\"mr-sm-2\",attrs:{\"for\":\"input-price\"}},[_vm._v(\"Price:\")]),_c('b-input',{staticClass:\"mr-sm-2\",attrs:{\"id\":\"input-price\",\"placeholder\":\"price\"},model:{value:(_vm.annonce.price),callback:function ($$v) {_vm.$set(_vm.annonce, \"price\", $$v)},expression:\"annonce.price\"}}),_c('label',{staticClass:\"mr-sm-2\",attrs:{\"for\":\"input-currency\"}},[_vm._v(\"Currency:\")]),_c('b-input',{staticClass:\"mr-sm-2\",attrs:{\"id\":\"input-currency\",\"placeholder\":\"currency (€,$...)\"},model:{value:(_vm.annonce.currency),callback:function ($$v) {_vm.$set(_vm.annonce, \"currency\", $$v)},expression:\"annonce.currency\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-images\",\"label\":\"Images:\",\"label-for\":\"input-images\",\"description\":\"Add some images for a better description & visibility\"}},[_c('Upload',{attrs:{\"id\":\"input-images\",\"images\":_vm.annonce.images},on:{\"imagesUploaded\":_vm.imagesUploaded}})],1),_c('p',[_vm._v(\"If you add images, don't forget to hit the \\\"send\\\" button before hitting the \\\"save\\\" one.\")]),_c('div',{staticClass:\"d-flex\"},[_c('b-button',{staticClass:\"ml-auto\",attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.add()}}},[_vm._v(\"save\")]),_c('b-button',{staticClass:\"ml-2\",attrs:{\"variant\":\"secondary\"},on:{\"click\":function($event){return _vm.goBack()}}},[_vm._v(\"back\")])],1)],1),_vm._v(\" --------------------------- test dropzone not activated yet , don't use resized \"),_c('vueDropzone',{ref:\"myVueDropzone\",attrs:{\"id\":\"dropzone\",\"options\":_vm.dropzoneOptions,\"duplicateCheck\":true},on:{\"vdropzone-file-added\":_vm.vfileAdded,\"vdropzone-success\":_vm.vsuccess,\"vdropzone-error\":_vm.verror,\"vdropzone-removed-file\":_vm.vremoved,\"vdropzone-sending\":_vm.vsending}})],1):_c('div',[_vm._v(\" You must login to manage your annonces. \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { v4 as uuidv4 } from 'uuid';\r\n\r\nexport class Annonce {\r\n  constructor(){\r\n    this.id = uuidv4()\r\n    this.title = \"\"\r\n    this.category = \"\"\r\n    this.description = \"\"\r\n    this.price = null\r\n    this.currency = null\r\n    console.log('new annonce', this)\r\n  }\r\n\r\n}\r\n","<template>\r\n  <b-container>\r\n    <div v-if=\"webId != null\">\r\n      <h3>Add an Annonce</h3>\r\n      <b-form>\r\n\r\n        <b-form-group\r\n        id=\"input-group-title\"\r\n        label=\"Title:\"\r\n        label-for=\"input-title\"\r\n        description=\"Your annonce / 'small ad' need a explicit title.\"\r\n        >\r\n        <b-form-input\r\n        id=\"input-title\"\r\n        v-model=\"annonce.title\" :state=\"getState()\" autofocus\r\n        placeholder=\"Enter annonce title\"\r\n        required\r\n        ></b-form-input>\r\n      </b-form-group>\r\n\r\n\r\n      <!-- <b-input placeholder=\"title\" v-model=\"annonce.title\" :state=\"getState()\" autofocus /> -->\r\n\r\n      <b-form-group\r\n      id=\"input-group-category\"\r\n      label=\"Categories:\"\r\n      label-for=\"input-category\"\r\n      description=\"Please add 1 to 3 categories to specify where to find your annonce.\"\r\n      >\r\n      <b-form-input\r\n      id=\"input-category\"\r\n      placeholder=\"3 categories max, comma separated\"\r\n      v-model=\"annonce.category\"\r\n      ></b-form-input>\r\n    </b-form-group>\r\n\r\n    <!-- <b-input placeholder=\"3 categories max, comma separated\" v-model=\"annonce.category\" /> -->\r\n\r\n\r\n\r\n    <b-form-group\r\n    id=\"input-group-category\"\r\n    label=\"Description:\"\r\n    label-for=\"input-description\"\r\n    description=\"Please give a clear description.\"\r\n    >\r\n    <b-textarea id=\"input-description\" placeholder=\"Description\" v-model=\"annonce.description\"  rows=\"7\"/>\r\n    <!-- <b-form-input\r\n    id=\"input-category\"\r\n    placeholder=\"3 categories max, comma separated\"\r\n    v-model=\"annonce.category\"\r\n    required\r\n    ></b-form-input> -->\r\n  </b-form-group>\r\n\r\n  <b-form inline>\r\n    <label class=\"mr-sm-2\" for=\"input-price\">Price:</label>\r\n    <b-input id=\"input-price\" placeholder=\"price\" v-model=\"annonce.price\" class=\"mr-sm-2\" />\r\n    <label class=\"mr-sm-2\" for=\"input-currency\">Currency:</label>\r\n    <b-input id=\"input-currency\" placeholder=\"currency (€,$...)\" v-model=\"annonce.currency\" class=\"mr-sm-2\" />\r\n  </b-form>\r\n  <!-- <b-button variant=\"light\" @click=\"addField()\" style=\"margin-left:auto;\">\r\n  <b-icon icon=\"plus\"></b-icon>\r\n</b-button> -->\r\n\r\n\r\n\r\n<b-form-group\r\nid=\"input-group-images\"\r\nlabel=\"Images:\"\r\nlabel-for=\"input-images\"\r\ndescription=\"Add some images for a better description & visibility\"\r\n>\r\n\r\n\r\n\r\n\r\n<!-- @vdropzone-success-multiple=\"vsuccessMuliple\"\r\n@vdropzone-sending-multiple=\"vsendingMuliple\"\r\n@vdropzone-queue-complete=\"vqueueComplete\"\r\n@vdropzone-total-upload-progress=\"vprogress\"\r\n@vdropzone-mounted=\"vmounted\"\r\n@vdropzone-drop=\"vddrop\"\r\n@vdropzone-drag-start=\"vdstart\"\r\n@vdropzone-drag-end=\"vdend\"\r\n@vdropzone-drag-enter=\"vdenter\"\r\n@vdropzone-drag-over=\"vdover\"\r\n@vdropzone-drag-leave=\"vdleave\"\r\n@vdropzone-duplicate-file=\"vdduplicate\" -->\r\n<!-- <vueDropzone ref=\"myVueDropzone\" id=\"dropzone\" :options=\"dropzoneOptions\"></vueDropzone> -->\r\n<Upload id=\"input-images\" :images=\"annonce.images\" @imagesUploaded=\"imagesUploaded\"/>\r\n<!-- <b-form-input\r\nid=\"input-title\"\r\nv-model=\"annonce.title\" :state=\"getState()\" autofocus\r\nplaceholder=\"Enter annonce title\"\r\nrequired\r\n></b-form-input> -->\r\n</b-form-group>\r\n<p>If you add images, don't forget to hit the \"send\" button before hitting the \"save\" one.</p>\r\n\r\n\r\n<div class=\"d-flex\">\r\n\r\n  <b-button class=\"ml-auto\" variant=\"info\" @click=\"add()\">save</b-button>\r\n  <b-button class=\"ml-2\" variant=\"secondary\" @click=\"goBack()\">back</b-button>\r\n</div>\r\n</b-form>\r\n\r\n\r\n---------------------------\r\ntest dropzone not activated yet , don't use\r\nresized\r\n\r\n<vueDropzone ref=\"myVueDropzone\" id=\"dropzone\"\r\n@vdropzone-file-added=\"vfileAdded\"\r\n@vdropzone-success=\"vsuccess\"\r\n@vdropzone-error=\"verror\"\r\n@vdropzone-removed-file=\"vremoved\"\r\n@vdropzone-sending=\"vsending\"\r\n\r\n:options=\"dropzoneOptions\"\r\n:duplicateCheck=\"true\">\r\n</vueDropzone>\r\n\r\n\r\n\r\n</div>\r\n<div v-else>\r\n  You must login to manage your annonces.\r\n</div>\r\n</b-container>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\n\r\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css'\r\n\r\nimport {Annonce} from './Annonce'\r\n\r\n\r\nexport default {\r\n  name: \"AnnonceEdit\",\r\n  components: {\r\n    'Upload': () => import('@/components/portfolio/Upload'),\r\n    'vueDropzone': () => import('vue2-dropzone')\r\n  },\r\n  data(){\r\n    return{\r\n      annonce: null,\r\n      files: null,\r\n      dropzoneOptions: {\r\n        url: 'https://httpbin.org/post',\r\n        thumbnailWidth: 200,\r\n        maxFilesize: 0.5,\r\n        headers: { \"My-Awesome-Header\": \"header value\" },\r\n        addRemoveLinks: true,\r\n        resizeWidth: 100,\r\n        //  resizeHeight: 400,\r\n      },\r\n      // fileAdded: false,\r\n      // filesAdded: false,\r\n      // success: false,\r\n      // error: false,\r\n      // removedFile: false,\r\n      // sending: false,\r\n      // successMultiple: false,\r\n      // sendingMultiple: false,\r\n      // queueComplete: false,\r\n      // uploadProgress: false,\r\n      // progress: false,\r\n      // myProgress: 0,\r\n      // isMounted: false,\r\n      // dDrop: false,\r\n      // dStarted: false,\r\n      // dEnded: false,\r\n      // dEntered: false,\r\n      // dOver: false,\r\n      // dLeave: false,\r\n      // dDuplicate:false\r\n    }\r\n  },\r\n  created(){\r\n    console.log(this.$route.params.id)\r\n    this.annonce = this.$route.params.id != undefined ?  this.annoncesMy.find(x => x.id === this.$route.params.id): new Annonce()\r\n    this.annonce.images == undefined ? this.annonce.images = [] : \"\"\r\n  },\r\n  methods: {\r\n    // vfileAdded(file){\r\n    //   console.log(file)\r\n    // },\r\n    vsuccess(file){\r\n      console.log(file)\r\n    },\r\n    verror(file){\r\n      console.log(file)\r\n    },\r\n    vremoved(file){\r\n      console.log(file)\r\n    },\r\n    vsending(file){\r\n      console.log(file)\r\n    },\r\n    vfileAdded(origFile) {\r\n      let dropzone = this.$refs.myVueDropzone\r\n      var MAX_WIDTH  = 800;\r\n      var MAX_HEIGHT = 600;\r\n\r\n      var reader = new FileReader();\r\n\r\n      // Convert file to img\r\n\r\n      reader.addEventListener(\"load\", function(event) {\r\n\r\n        var origImg = new Image();\r\n        origImg.src = event.target.result;\r\n\r\n        origImg.addEventListener(\"load\", function(event) {\r\n\r\n          var width  = event.target.width;\r\n          var height = event.target.height;\r\n\r\n\r\n          // Don't resize if it's small enough\r\n\r\n          if (width <= MAX_WIDTH && height <= MAX_HEIGHT) {\r\n            dropzone.enqueueFile(origFile);\r\n            return;\r\n          }\r\n\r\n\r\n          // Calc new dims otherwise\r\n\r\n          if (width > height) {\r\n            if (width > MAX_WIDTH) {\r\n              height *= MAX_WIDTH / width;\r\n              width = MAX_WIDTH;\r\n            }\r\n          } else {\r\n            if (height > MAX_HEIGHT) {\r\n              width *= MAX_HEIGHT / height;\r\n              height = MAX_HEIGHT;\r\n            }\r\n          }\r\n\r\n\r\n          // Resize\r\n\r\n          var canvas = document.createElement('canvas');\r\n          canvas.width = width;\r\n          canvas.height = height;\r\n\r\n          var ctx = canvas.getContext(\"2d\");\r\n          ctx.drawImage(origImg, 0, 0, width, height);\r\n\r\n          var resizedFile = this.base64ToFile(canvas.toDataURL(), origFile);\r\n\r\n\r\n          // Replace original with resized\r\n\r\n          var origFileIndex = dropzone.files.indexOf(origFile);\r\n          dropzone.files[origFileIndex] = resizedFile;\r\n\r\n\r\n          // Enqueue added file manually making it available for\r\n          // further processing by dropzone\r\n\r\n          dropzone.enqueueFile(resizedFile);\r\n        });\r\n      });\r\n\r\n      reader.readAsDataURL(origFile);\r\n    },\r\n\r\n\r\n\r\n    add() {\r\n      if (this.annonce.title.length < 1){\r\n        alert(\"Title must not be empty !\")\r\n        return\r\n      }\r\n      console.log(this.annonce)\r\n      this.$store.dispatch('annonce/update', this.annonce)\r\n      this.$router.go(-1)\r\n    },\r\n    goBack(){\r\n      this.$router.go(-1)\r\n    },\r\n    getState() {\r\n      return this.annonce.title.length > 0;\r\n    },\r\n    imagesUploaded(images){\r\n      console.log(images)\r\n      this.annonce.images = images\r\n    },\r\n    base64ToFile(dataURI, origFile) {\r\n      var byteString, mimestring;\r\n\r\n      if(dataURI.split(',')[0].indexOf('base64') !== -1 ) {\r\n        byteString = atob(dataURI.split(',')[1]);\r\n      } else {\r\n        byteString = decodeURI(dataURI.split(',')[1]);\r\n      }\r\n\r\n      mimestring = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n\r\n      var content = new Array();\r\n      for (var i = 0; i < byteString.length; i++) {\r\n        content[i] = byteString.charCodeAt(i);\r\n      }\r\n\r\n      var newFile = new File(\r\n        [new Uint8Array(content)], origFile.name, {type: mimestring}\r\n      );\r\n\r\n\r\n      // Copy props set by the dropzone in the original file\r\n\r\n      var origProps = [\r\n        \"upload\", \"status\", \"previewElement\", \"previewTemplate\", \"accepted\"\r\n      ];\r\n\r\n      origProps.forEach((p) => {\r\n        newFile[p] = origFile[p];\r\n      });\r\n\r\n      return newFile;\r\n    }\r\n  },\r\n  computed:{\r\n    annoncesMy() {\r\n      return this.$store.state.annonce.annoncesMy\r\n    },\r\n    webId() {\r\n      return this.$store.state.solid.webId\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnonceEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnonceEdit.vue?vue&type=template&id=68ae91b7&\"\nimport script from \"./AnnonceEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnonceEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;"],"sourceRoot":""}