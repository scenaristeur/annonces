(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["detail"],{e3e3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card",{staticClass:"mb-2",attrs:{tag:"article",button:""}},[a("b-card-title",{staticClass:"d-flex justify-content-between align-items-center"},[a("span",[e._v(e._s(e.a.title))]),a("b-card-sub-title",e._l(e.a.category.split(","),(function(t,r){return a("b-badge",{key:r,staticClass:"mr-3",attrs:{variant:"primary",pill:""}},[e._v(e._s(t))])})),1),a("b-card-text",[e._v(" "+e._s(e.a.price)+" "+e._s(e.a.currency)+" ")])],1),a("b-card-text",[e._v(" "+e._s(e.a.description)+" ")]),0==e.error.length?a("b-alert",{attrs:{show:""}},[null!=e.webId&&void 0!=e.a.creator?a("div",[e._v(" Contact : "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-contact",modifiers:{"modal-contact":!0}}],attrs:{variant:"info"}},[e._v(e._s(e.a.creator.split("/")[2]))])],1):a("div",[e._v(" You must login to contact the creator of this annonce. ")])]):a("b-alert",{attrs:{show:"",variant:"danger"}},[e._v(" "+e._s(e.error)+" "),a("b-button",{attrs:{variant:"danger",to:"/"}},[e._v("Back to Annonces List")])],1),void 0!=e.a.date?a("small",[e._v(e._s(new Date(e.a.date).toLocaleDateString()))]):e._e(),e._l(e.a.images,(function(e){return a("div",{key:e},[a("b-card-img",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{src:e,alt:"Image",bottom:""}})],1)}))],2),e._m(0),a("b-modal",{attrs:{id:"modal-contact",centered:"",title:"Send a message",size:"lg"},on:{ok:e.onSend}},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter your message to "+e.a.creator,rows:"3","max-rows":"6"},model:{value:e.message.text,callback:function(t){e.$set(e.message,"text",t)},expression:"message.text"}})],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("small",[e._v("Todo: Caroussel with some annonce suggestion from same categories.")])])}],o=a("1da1"),s=(a("96cf"),a("00e8")),i=a.n(s),c=a("7fed"),u=a.n(c),l=a("ec26"),d=new u.a(i.a),m=window.solid,p={name:"AnnonceDetail",data:function(){return{a:{category:""},message:{},error:""}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$route.query.url,console.log(a),void 0!=a){t.next=6;break}e.$router.push({path:"/"}),t.next=23;break;case 6:return t.prev=6,t.t0=JSON,t.next=10,d.readFile(a);case 10:return t.t1=t.sent,e.a=t.t0.parse.call(t.t0,t.t1),e.a.image=e.a.images[0]||"https://picsum.photos/400/200/?image=41",e.a.date=e.a.modified.pop()||e.a.created,t.next=16,m.data.from(e.a.creator)[e.a.creator]["http://www.w3.org/ns/ldp#inbox"];case 16:r=t.sent,e.inboxAnnonce="".concat(r)+"annonces/",t.next=23;break;case 20:t.prev=20,t.t2=t["catch"](6),e.error=t.t2+"... \n There is no annonce at \n"+a;case 23:case"end":return t.stop()}}),t,null,[[6,20]])})))()},methods:{onSend:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message.annonce=e.a,e.message.creator=e.webId,e.message.created=(new Date).toISOString(),console.log(e.message),console.log(e.inboxAnnonce),a=e.inboxAnnonce+Object(l["a"])()+".json",t.prev=6,t.next=9,d.postFile(a,JSON.stringify(e.message),"application/json");case 9:alert("Message send to "+e.message.annonce.creator),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](6),alert("Sorry but i can not send message, "+t.t0);case 15:e.message.text="";case 16:case"end":return t.stop()}}),t,null,[[6,12]])})))()}},computed:{webId:function(){return this.$store.state.solid.webId}}},g=p,f=a("2877"),b=Object(f["a"])(g,r,n,!1,null,null,null);t["default"]=b.exports},ec26:function(e,t,a){"use strict";var r,n=new Uint8Array(16);function o(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function i(e){return"string"===typeof e&&s.test(e)}for(var c=i,u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!c(a))throw TypeError("Stringified UUID is invalid");return a}var m=d;function p(e,t,a){e=e||{};var r=e.random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){a=a||0;for(var n=0;n<16;++n)t[a+n]=r[n];return t}return m(r)}t["a"]=p}}]);
//# sourceMappingURL=detail.2a98e91f.js.map