(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["annonceEdit"],{"1e3f":function(e,n,t){},"3fbb":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("b-container",[null!=e.webId?t("div",[t("h3",[e._v("Add an Annonce")]),t("b-form",[t("b-form-group",{attrs:{id:"input-group-title",label:"Title:","label-for":"input-title",description:"Your annonce / 'small ad' need a explicit title."}},[t("b-form-input",{attrs:{id:"input-title",state:e.getState(),autofocus:"",placeholder:"Enter annonce title",required:""},model:{value:e.annonce.title,callback:function(n){e.$set(e.annonce,"title",n)},expression:"annonce.title"}})],1),t("b-form-group",{attrs:{id:"input-group-category",label:"Categories:","label-for":"input-category",description:"Please add 1 to 3 categories to specify where to find your annonce."}},[t("b-form-input",{attrs:{id:"input-category",placeholder:"3 categories max, comma separated"},model:{value:e.annonce.category,callback:function(n){e.$set(e.annonce,"category",n)},expression:"annonce.category"}})],1),t("b-form-group",{attrs:{id:"input-group-category",label:"Description:","label-for":"input-description",description:"Please give a clear description."}},[t("b-textarea",{attrs:{id:"input-description",placeholder:"Description",rows:"7"},model:{value:e.annonce.description,callback:function(n){e.$set(e.annonce,"description",n)},expression:"annonce.description"}})],1),t("b-form",{attrs:{inline:""}},[t("label",{staticClass:"mr-sm-2",attrs:{for:"input-price"}},[e._v("Price:")]),t("b-input",{staticClass:"mr-sm-2",attrs:{id:"input-price",placeholder:"price"},model:{value:e.annonce.price,callback:function(n){e.$set(e.annonce,"price",n)},expression:"annonce.price"}}),t("label",{staticClass:"mr-sm-2",attrs:{for:"input-currency"}},[e._v("Currency:")]),t("b-input",{staticClass:"mr-sm-2",attrs:{id:"input-currency",placeholder:"currency (â‚¬,$...)"},model:{value:e.annonce.currency,callback:function(n){e.$set(e.annonce,"currency",n)},expression:"annonce.currency"}})],1),t("b-form-group",{attrs:{id:"input-group-images",label:"Images:","label-for":"input-images",description:"Add some images for a better description & visibility"}}),t("vueDropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:e.dropzoneOptions,duplicateCheck:!0},on:{"vdropzone-file-added":e.vfileAdded,"vdropzone-success":e.vsuccess,"vdropzone-error":e.verror,"vdropzone-removed-file":e.vremoved,"vdropzone-sending":e.vsending,"vdropzone-success-multiple":e.vsuccessMuliple,"vdropzone-sending-multiple":e.vsendingMuliple,"vdropzone-queue-complete":e.vqueueComplete}}),t("p",[e._v("Files will be automatically upload at "),t("small",[t("a",{attrs:{href:e.path,target:"_blank"}},[e._v(e._s(e.path))])])]),t("div",{staticClass:"d-flex"},[t("b-button",{staticClass:"ml-auto",attrs:{variant:"info",disbled:"numberOfFiles != 0"},on:{click:function(n){return e.add()}}},[e._v("save")]),t("b-button",{staticClass:"ml-2",attrs:{variant:"secondary"},on:{click:function(n){return e.goBack()}}},[e._v("back")])],1)],1)],1):t("div",[e._v(" You must login to manage your annonces. ")])])},r=[],a=t("1da1"),i=(t("96cf"),t("d3b7"),t("3ca3"),t("ddb0"),t("7db0"),t("b0c0"),t("1276"),t("ac1f"),t("5cc6"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("3c5d"),t("2954"),t("649e"),t("219c"),t("170b"),t("b39a"),t("72f7"),t("7fed")),c=t.n(i),s=t("16a6"),l=t.n(s),u=(t("1e3f"),t("d4ec")),d=(t("a4d3"),t("e01a"),t("ec26")),p=function e(){Object(u["a"])(this,e),this.id=Object(d["a"])(),this.title="",this.category="",this.description="",this.price=null,this.currency=null,console.log("new annonce",this)},f=window.solid,m=new c.a(window.solid.auth),g={name:"AnnonceEdit",components:{vueDropzone:function(){return t.e("chunk-2d0e51ff").then(t.t.bind(null,"92c3",7))}},data:function(){return{annonce:null,files:null,path:"",numberOfFiles:0,dropzoneOptions:{url:"https://spoggy-test4.solidcommunity.net/public/portfolio/",maxFilesize:1,headers:{withCredentials:!0},addRemoveLinks:!0,autoQueue:!1}}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(e.$route.params.id),e.annonce=void 0!=e.$route.params.id?e.annoncesMy.find((function(n){return n.id===e.$route.params.id})):new p,void 0==e.annonce.images&&(e.annonce.images=[]),n.next=5,f.data.user.storage;case 5:t=n.sent,e.path="".concat(t)+"public/portfolio/";case 7:case"end":return n.stop()}}),n)})))()},methods:{vsuccess:function(e){return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e);case 1:case"end":return n.stop()}}),n)})))()},verror:function(e){console.log(e)},vremoved:function(e){console.log(e)},vsending1:function(e){return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e);case 1:case"end":return n.stop()}}),n)})))()},vsending:function(e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),n.numberOfFiles--,t.prev=2,console.log("success",n.numberOfFiles,e),o=encodeURI(n.path+e.name),console.log(o),l()([e]).image(l.a.text.center(n.path,"30px Josefin Slab","#fff",.8)),t.next=9,m.createFile(o,e,e.type);case 9:n.annonce.images.push(o),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),alert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},vsuccessMuliple:function(e){console.log("MUILTIPLE SUCCESS",e)},vsendingMuliple:function(e){console.log("MULTIPLE SENDING",e)},vqueueComplete:function(e){console.log("QUEUE COMPLETE",e)},vfileAdded1:function(e){console.log(e)},vfileAdded:function(e){this.numberOfFiles++;var n=this.$refs.myVueDropzone,t=this,o=1024,r=768;console.log("Orig",e);var a=new FileReader;a.addEventListener("load",(function(a){var i=new Image;i.src=a.target.result,i.addEventListener("load",(function(a){var c=a.target.width,s=a.target.height;if(c<=o&&s<=r)n.dropzone.enqueueFile(e);else{c>s?c>o&&(s*=o/c,c=o):s>r&&(c*=r/s,s=r);var l=document.createElement("canvas");l.width=c,l.height=s;var u=l.getContext("2d");u.drawImage(i,0,0,c,s);var d=t.base64ToFile(l.toDataURL(),e);console.log("resized",d),console.log(n);var p=n.dropzone.files.indexOf(e);n.dropzone.files[p]=d,n.dropzone.enqueueFile(d)}}))})),a.readAsDataURL(e)},add:function(){this.annonce.title.length<1?alert("Title must not be empty !"):(console.log(this.annonce),this.$store.dispatch("annonce/update",this.annonce),this.$router.go(-1))},goBack:function(){this.$router.go(-1)},getState:function(){return this.annonce.title.length>0},imagesUploaded:function(e){console.log(e),this.annonce.images=e},base64ToFile:function(e,n){var t,o;t=-1!==e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0];for(var r=new Array,a=0;a<t.length;a++)r[a]=t.charCodeAt(a);var i=new File([new Uint8Array(r)],n.name,{type:o}),c=["upload","status","previewElement","previewTemplate","accepted"];return c.forEach((function(e){i[e]=n[e]})),i}},computed:{annoncesMy:function(){return this.$store.state.annonce.annoncesMy},webId:function(){return this.$store.state.solid.webId}}},v=g,b=t("2877"),h=Object(b["a"])(v,o,r,!1,null,null,null);n["default"]=h.exports},"7db0":function(e,n,t){"use strict";var o=t("23e7"),r=t("b727").find,a=t("44d2"),i="find",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),o({target:"Array",proto:!0,forced:c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},ec26:function(e,n,t){"use strict";var o,r=new Uint8Array(16);function a(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function c(e){return"string"===typeof e&&i.test(e)}for(var s=c,l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(l[e[n+0]]+l[e[n+1]]+l[e[n+2]]+l[e[n+3]]+"-"+l[e[n+4]]+l[e[n+5]]+"-"+l[e[n+6]]+l[e[n+7]]+"-"+l[e[n+8]]+l[e[n+9]]+"-"+l[e[n+10]]+l[e[n+11]]+l[e[n+12]]+l[e[n+13]]+l[e[n+14]]+l[e[n+15]]).toLowerCase();if(!s(t))throw TypeError("Stringified UUID is invalid");return t}var p=d;function f(e,n,t){e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){t=t||0;for(var r=0;r<16;++r)n[t+r]=o[r];return n}return p(o)}n["a"]=f}}]);
//# sourceMappingURL=annonceEdit.c31b9d1e.js.map