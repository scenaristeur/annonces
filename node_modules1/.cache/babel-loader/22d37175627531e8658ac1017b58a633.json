{"remainingRequest":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Smag\\Documents\\dev\\bon-prix\\src\\components\\annonce\\AnnonceDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\src\\components\\annonce\\AnnonceDetail.vue","mtime":1616684704821},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL1NtYWcvRG9jdW1lbnRzL2Rldi9ib24tcHJpeC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF1dGggZnJvbSAnc29saWQtYXV0aC1jbGllbnQnOwppbXBvcnQgRkMgZnJvbSAnc29saWQtZmlsZS1jbGllbnQnOwp2YXIgZmMgPSBuZXcgRkMoYXV0aCk7CnZhciBsZGZsZXggPSB3aW5kb3cuc29saWQ7CmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFubm9uY2VEZXRhaWwiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhOiB7fSwKICAgICAgbWVzc2FnZToge30sCiAgICAgIGVycm9yOiAiIgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciB1cmwsIGluYm94Rm9sZGVyOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgdXJsID0gX3RoaXMuJHJvdXRlLnF1ZXJ5LnVybDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cmwpOwoKICAgICAgICAgICAgICBpZiAoISh1cmwgPT0gdW5kZWZpbmVkKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gSlNPTjsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIGZjLnJlYWRGaWxlKHVybCk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfdGhpcy5hID0gX2NvbnRleHQudDAucGFyc2UuY2FsbChfY29udGV4dC50MCwgX2NvbnRleHQudDEpOwogICAgICAgICAgICAgIF90aGlzLmEuaW1hZ2UgPSBfdGhpcy5hLmltYWdlc1swXSB8fCAiaHR0cHM6Ly9waWNzdW0ucGhvdG9zLzQwMC8yMDAvP2ltYWdlPTQxIjsKICAgICAgICAgICAgICBfdGhpcy5hLmRhdGUgPSBfdGhpcy5hLm1vZGlmaWVkLnBvcCgpIHx8IF90aGlzLmEuY3JlYXRlZDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgcmV0dXJuIGxkZmxleC5kYXRhLmZyb20oX3RoaXMuYS5jcmVhdG9yKVtfdGhpcy5hLmNyZWF0b3JdWydodHRwOi8vd3d3LnczLm9yZy9ucy9sZHAjaW5ib3gnXTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgaW5ib3hGb2xkZXIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF90aGlzLmluYm94QW5ub25jZSA9ICIiLmNvbmNhdChpbmJveEZvbGRlcikgKyAiYW5ub25jZXMvIjsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMDsKICAgICAgICAgICAgICBfY29udGV4dC50MiA9IF9jb250ZXh0WyJjYXRjaCJdKDYpOwogICAgICAgICAgICAgIF90aGlzLmVycm9yID0gX2NvbnRleHQudDIgKyAiLi4uIFxuIFRoZXJlIGlzIG5vIGFubm9uY2UgYXQgXG4iICsgdXJsOwoKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s2LCAyMF1dKTsKICAgIH0pKSgpOwogIH0sCiAgbWV0aG9kczogewogICAgb25TZW5kOiBmdW5jdGlvbiBvblNlbmQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGZpbGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5tZXNzYWdlLmFubm9uY2UgPSBfdGhpczIuYTsKICAgICAgICAgICAgICAgIF90aGlzMi5tZXNzYWdlLmNyZWF0b3IgPSBfdGhpczIud2ViSWQ7CiAgICAgICAgICAgICAgICBfdGhpczIubWVzc2FnZS5jcmVhdGVkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLmluYm94QW5ub25jZSk7CiAgICAgICAgICAgICAgICBmaWxlID0gX3RoaXMyLmluYm94QW5ub25jZSArIHV1aWR2NCgpICsgIi5qc29uIjsgLy8gbGV0IGFjbE9iamVjdCA9IGF3YWl0IGZjLmFjbFVybFBhcnNlcih0aGlzLmluYm94QW5ub25jZSkKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJpbmhlcml0IGFjbCIsYWNsT2JqZWN0KQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBmYy5jcmVhdGVGaWxlKGZpbGUsIEpTT04uc3RyaW5naWZ5KF90aGlzMi5tZXNzYWdlKSwgImFwcGxpY2F0aW9uL2pzb24iKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgYWxlcnQoIk1lc3NhZ2Ugc2VuZCB0byAiICsgX3RoaXMyLm1lc3NhZ2UuYW5ub25jZS5jcmVhdG9yKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgICBhbGVydCgiU29ycnkgYnV0IGkgY2FuIG5vdCBzZW5kIG1lc3NhZ2UsICIgKyBfY29udGV4dDIudDApOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX3RoaXMyLm1lc3NhZ2UudGV4dCA9ICIiOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzYsIDEyXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB3ZWJJZDogZnVuY3Rpb24gd2ViSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zb2xpZC53ZWJJZDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AnnonceDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n\r\n    <b-card\r\n    tag=\"article\"\r\n    class=\"mb-2\"\r\n    button\r\n    >\r\n\r\n    <b-card-title class=\"d-flex justify-content-between align-items-center\">\r\n\r\n      <span>{{a.title}}</span>\r\n      <b-badge variant=\"primary\" pill class=\"mr-3\">{{a.category}}</b-badge>\r\n      <b-card-text>\r\n        {{a.price}} {{a.currency}}\r\n\r\n      </b-card-text>\r\n    </b-card-title>\r\n\r\n\r\n    <b-card-text>\r\n      {{ a.description }}\r\n    </b-card-text>\r\n\r\n\r\n    <b-alert v-if=\"error.length == 0\" show>\r\n      <div v-if=\"webId != null\">\r\n        Contact : <b-button v-b-modal.modal-contact variant=\"info\">{{ a.creator }}</b-button>\r\n      </div>\r\n      <div v-else>\r\n        You must login to contact the creator of this annonce.\r\n      </div>\r\n    </b-alert>\r\n    <b-alert v-else show variant=\"danger\">\r\n      {{ error }}\r\n\r\n      <b-button variant=\"danger\" to=\"/\">Back to Annonces List</b-button>\r\n    </b-alert>\r\n\r\n    <div v-for=\"i in a.images\" :key=\"i\">\r\n      <b-card-img :src=\"i\" alt=\"Image\"   style=\"max-width: 20rem;\"\r\n      class=\"mb-2\" bottom></b-card-img>\r\n    </div>\r\n    <!-- {{ a.images }} -->\r\n\r\n\r\n\r\n    <small> modified: {{a.date}}</small>\r\n  </b-card>\r\n\r\n\r\n  <b-modal id=\"modal-contact\" centered title=\"Send a message\" @ok=\"onSend\" size=\"lg\">\r\n\r\n    <b-form-textarea\r\n    id=\"textarea\"\r\n    v-model=\"message.text\"\r\n    :placeholder=\"'Enter your message to '+ a.creator\"\r\n    rows=\"3\"\r\n    max-rows=\"6\"\r\n    ></b-form-textarea>\r\n  </b-modal>\r\n\r\n</div>\r\n\r\n<!-- <b-button variant=\"outline-info\"> -->\r\n<!-- </b-button>\r\n{{ a}}\r\n</div> -->\r\n</template>\r\n\r\n<script>\r\nimport auth from 'solid-auth-client';\r\nimport FC from 'solid-file-client'\r\nconst fc = new FC( auth )\r\nlet ldflex = window.solid\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n\r\nexport default {\r\n  name: \"AnnonceDetail\",\r\n  data(){\r\n    return {\r\n      a: {},\r\n      message: {},\r\n      error : \"\"\r\n    }\r\n  },\r\n  async created(){\r\n    let url = this.$route.query.url\r\n    console.log(url)\r\n    if (url == undefined){ this.$router.push({path: '/'}) }else{\r\n      try{\r\n        this.a = JSON.parse(await fc.readFile(url))\r\n        this.a.image = this.a.images[0] || \"https://picsum.photos/400/200/?image=41\"\r\n        this.a.date = this.a.modified.pop() || this.a.created\r\n        let inboxFolder = await ldflex.data.from(this.a.creator)[this.a.creator]['http://www.w3.org/ns/ldp#inbox']\r\n        this.inboxAnnonce = `${inboxFolder}`+\"annonces/\"\r\n      }catch(e){\r\n        this.error = e+ \"... \\n There is no annonce at \\n\"+url\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async onSend() {\r\n      this.message.annonce = this.a\r\n      this.message.creator = this.webId\r\n      this.message.created = new Date().toISOString()\r\n      console.log(this.message)\r\n      console.log(this.inboxAnnonce)\r\n      let file = this.inboxAnnonce+uuidv4()+\".json\"\r\n\r\n\r\n      // let aclObject = await fc.aclUrlParser(this.inboxAnnonce)\r\n      // console.log(\"inherit acl\",aclObject)\r\n\r\n      try{\r\n        await fc.createFile(file, JSON.stringify(this.message), \"application/json\")\r\n        alert(\"Message send to \"+this.message.annonce.creator)\r\n      }catch(e){\r\n        alert(\"Sorry but i can not send message, \"+e)\r\n      }\r\n      this.message.text = \"\"\r\n\r\n    }\r\n  },\r\n  computed:{\r\n    webId() {\r\n      return this.$store.state.solid.webId\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/annonce"}]}