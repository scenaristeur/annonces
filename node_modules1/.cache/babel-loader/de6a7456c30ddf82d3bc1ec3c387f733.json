{"remainingRequest":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Smag\\Documents\\dev\\bon-prix\\src\\components\\annonce\\AnnonceInbox.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\src\\components\\annonce\\AnnonceInbox.vue","mtime":1616690871784},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Smag\\Documents\\dev\\bon-prix\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL1NtYWcvRG9jdW1lbnRzL2Rldi9ib24tcHJpeC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF1dGggZnJvbSAnc29saWQtYXV0aC1jbGllbnQnOwppbXBvcnQgRkMgZnJvbSAnc29saWQtZmlsZS1jbGllbnQnOwp2YXIgZmMgPSBuZXcgRkMoYXV0aCk7CnZhciBsZGZsZXggPSB3aW5kb3cuc29saWQ7IC8vIGltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBbm5vbmNlSW5ib3giLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlczogW10sCiAgICAgIGRlbGV0ZU1lc3NhZ2U6ICIiCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vICB0aGlzLndlYklkID0gdGhpcy4kc3RvcmUuc3RhdGUuc29saWQud2ViSWQKICAgICAgICAgICAgICBfdGhpcy5yZWFkSW5ib3goKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlYWRJbmJveDogZnVuY3Rpb24gcmVhZEluYm94KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBpbmJveEZvbGRlciwgaW5ib3hBbm5vbmNlLCBhY2xPYmplY3QsIGFjbENvbnRlbnQsIGFjbFVzZXJzLCBhY2xDb250ZW50TmV3LCBfeWllbGQkZmMkZ2V0SXRlbUxpbmssIGFjbFVybCwgcmVzdWx0LCBmb2xkZXIsIGZpbGVzLCBmLCBtOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMyLndlYklkICE9IG51bGwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBsZGZsZXguZGF0YS5mcm9tKF90aGlzMi53ZWJJZClbX3RoaXMyLndlYklkXVsnaHR0cDovL3d3dy53My5vcmcvbnMvbGRwI2luYm94J107CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGluYm94Rm9sZGVyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBpbmJveEFubm9uY2UgPSAiIi5jb25jYXQoaW5ib3hGb2xkZXIpICsgImFubm9uY2VzLyI7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmMuaXRlbUV4aXN0cyhpbmJveEFubm9uY2UpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBpZiAoX2NvbnRleHQyLnNlbnQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBmYy5jcmVhdGVGb2xkZXIoaW5ib3hBbm5vbmNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gZmMuYWNsVXJsUGFyc2VyKGluYm94QW5ub25jZSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBhY2xPYmplY3QgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJpbmhlcml0IGFjbCIsIGFjbE9iamVjdCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIGZjLmFjbC5jcmVhdGVDb250ZW50KGluYm94QW5ub25jZSwgYWNsT2JqZWN0CiAgICAgICAgICAgICAgICAvKiwgb3B0aW9ucyovCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgYWNsQ29udGVudCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWNsQ29udGVudCk7IC8vIGFkZCBhbiBvdGhlciBydWxlCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIHJldHVybiBmYy5hY2wuYWRkVXNlck1vZGUoe30sIFt7CiAgICAgICAgICAgICAgICAgIGFnZW50OiBfdGhpczIud2ViSWQKICAgICAgICAgICAgICAgIH1dLCBbJ1JlYWQnLCAnV3JpdGUnLCAnQ29udHJvbCddLCBbJ2FjY2Vzc1RvJywgJ2RlZmF1bHQnXSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBhY2xVc2VycyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiBmYy5hY2wuYWRkVXNlck1vZGUoYWNsVXNlcnMsIFt7CiAgICAgICAgICAgICAgICAgIGFnZW50Q2xhc3M6ICdBdXRoZW50aWNhdGVkQWdlbnQnCiAgICAgICAgICAgICAgICB9XSwgWydBcHBlbmQnXSwgWydkZWZhdWx0J10pOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgYWNsVXNlcnMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICByZXR1cm4gZmMuYWNsLmFkZFVzZXJNb2RlKGFjbFVzZXJzLCBbewogICAgICAgICAgICAgICAgICBhZ2VudENsYXNzOiAnQWdlbnQnCiAgICAgICAgICAgICAgICB9XSwgWydBcHBlbmQnLCAnUmVhZCddLCBbJ2FjY2Vzc1RvJ10pOwoKICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgYWNsVXNlcnMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmMuYWNsLmNyZWF0ZUNvbnRlbnQoaW5ib3hBbm5vbmNlLCBhY2xVc2Vycyk7CgogICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICBhY2xDb250ZW50TmV3ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYnVpbGQgYW4gYWNsQ29udGVudCAnICsgYWNsQ29udGVudE5ldyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDMzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZjLmdldEl0ZW1MaW5rcyhpbmJveEFubm9uY2UsIHsKICAgICAgICAgICAgICAgICAgbGlua3M6ICdpbmNsdWRlX3Bvc3NpYmxlJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICBfeWllbGQkZmMkZ2V0SXRlbUxpbmsgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIGFjbFVybCA9IF95aWVsZCRmYyRnZXRJdGVtTGluay5hY2w7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM3OwogICAgICAgICAgICAgICAgcmV0dXJuIGZjLnB1dEZpbGUoYWNsVXJsLCBhY2xDb250ZW50TmV3LCAndGV4dC90dXJ0bGUnKTsKCiAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInJlc3VsdCIsIHJlc3VsdCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQxOwogICAgICAgICAgICAgICAgcmV0dXJuIGZjLnJlYWRGb2xkZXIoaW5ib3hBbm5vbmNlKTsKCiAgICAgICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgICAgIGZvbGRlciA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZm9sZGVyKTsKICAgICAgICAgICAgICAgIGZpbGVzID0gZm9sZGVyLmZpbGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGIuY3JlYXRlZCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5jcmVhdGVkKS5nZXRUaW1lKCk7CiAgICAgICAgICAgICAgICB9KTsgLy8gY29uc29sZS5sb2coZmlsZXMpCgogICAgICAgICAgICAgICAgX3RoaXMyLm1lc3NhZ2VzID0gW107IC8vCgogICAgICAgICAgICAgIGNhc2UgNDU6CiAgICAgICAgICAgICAgICBpZiAoIShmaWxlcy5sZW5ndGggPiAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmID0gZmlsZXMuc2hpZnQoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IEpTT047CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDUwOwogICAgICAgICAgICAgICAgcmV0dXJuIGZjLnJlYWRGaWxlKGYudXJsKTsKCiAgICAgICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1MzsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIudDAucGFyc2UuY2FsbChfY29udGV4dDIudDAsIF9jb250ZXh0Mi50MSk7CgogICAgICAgICAgICAgIGNhc2UgNTM6CiAgICAgICAgICAgICAgICBtID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBtLnVybCA9IGYudXJsOwoKICAgICAgICAgICAgICAgIF90aGlzMi5tZXNzYWdlcy5wdXNoKG0pOyAvLyAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlcykKICAgICAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyhmKQogICAgICAgICAgICAgICAgLy8gbGV0IHJlc291cmNlID0gZi51cmwrIiN0aGlzIgogICAgICAgICAgICAgICAgLy8gZm9yIGF3YWl0IChjb25zdCBhbm5vbmNlX3VybCBvZiBsZGZsZXguZGF0YVtyZXNvdXJjZV1bJ2h0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy9oYXNQYXJ0J10pewogICAgICAgICAgICAgICAgLy8gICBsZXQgaWR4ID0gdGhpcy5hbm5vbmNlcy5maW5kSW5kZXgoeCA9PiB4LnVybCA9PT0gYCR7YW5ub25jZV91cmx9YCkKICAgICAgICAgICAgICAgIC8vICAgaWYgKGlkeCA9PT0gLTEpIHsKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLmFubm9uY2VzLnB1c2goe3VybDogYCR7YW5ub25jZV91cmx9YH0pCiAgICAgICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgICAgIC8vIH0KCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0NTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25EZWxldGU6IGZ1bmN0aW9uIG9uRGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZGVsZXRlIik7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmMuZGVsZXRlRmlsZShfdGhpczMudXJsVG9EZWxldGUpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpczMucmVhZEluYm94KCk7IC8vdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2Fubm9uY2UvZGVsZXRlJywgdGhpcy5pZFRvRGVsZXRlKQoKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2hvd0RlbGV0ZUNvbmZpcm06IGZ1bmN0aW9uIHNob3dEZWxldGVDb25maXJtKG0pIHsKICAgICAgdGhpcy5kZWxldGVNZXNzYWdlID0gIkRvIHlvdSB3YW50IHRvIGRlbGV0ZSA8Yj4iICsgbS51cmwgKyAiPC9iPiI7CiAgICAgIHRoaXMudXJsVG9EZWxldGUgPSBtLnVybDsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB3ZWJJZDogZnVuY3Rpb24gd2ViSWQoKSB7CiAgICAgIHRoaXMucmVhZEluYm94KCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgd2ViSWQ6IGZ1bmN0aW9uIHdlYklkKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc29saWQud2ViSWQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["AnnonceInbox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <b-list-group>\r\n    INBOX ( {{ messages.length}} messages )\r\n    <b-list-group-item v-for=\"m in messages\" :key=\"m.url\">\r\n      {{ m.created }} / {{ m.creator}} : <b>{{m.annonce.title}}</b> ::: {{ m.text }}\r\n\r\n\r\n      <b-button variant=\"light\" @click=\"reply(m)\" style=\"margin-left:auto;\">\r\n        <b-icon icon=\"pen\"></b-icon>\r\n      </b-button>\r\n      <b-button variant=\"danger\" @click=\"showDeleteConfirm(m)\" style=\"margin-left:auto;\" v-b-modal.message-delete>\r\n        <b-icon icon=\"trash\"></b-icon>\r\n      </b-button>\r\n    </b-list-group-item>\r\n\r\n    <b-modal id=\"message-delete\" centered title=\"Delete\" @ok=\"onDelete\">\r\n      <div class=\"p-3\" v-html=\"deleteMessage\"></div>\r\n    </b-modal>\r\n\r\n  </b-list-group>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport auth from 'solid-auth-client';\r\nimport FC from 'solid-file-client'\r\nconst fc = new FC( auth )\r\nlet ldflex = window.solid\r\n// import { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default {\r\n  name: \"AnnonceInbox\",\r\n  data() {\r\n    return {\r\n      messages: [],\r\n      deleteMessage: \"\"\r\n    }\r\n  },\r\n  async created(){\r\n    //  this.webId = this.$store.state.solid.webId\r\n    this.readInbox()\r\n  },\r\n  methods: {\r\n    async readInbox() {\r\n\r\n\r\n      // @prefix : <#>.\r\n      // @prefix acl: <http://www.w3.org/ns/auth/acl#>.\r\n      // @prefix foaf: <http://xmlns.com/foaf/0.1/>.\r\n      // @prefix target: <./>.\r\n      //\r\n      // :ReadAppend\r\n      //     a acl:Authorization;\r\n      //     acl:accessTo target:;\r\n      //     acl:agentClass acl:AuthenticatedAgent;\r\n      //     acl:mode acl:Read, acl:Append.\r\n      //\r\n      // :ReadWriteControl\r\n      //     a acl:Authorization;\r\n      //     acl:accessTo target:;\r\n      //     acl:default target:;\r\n      //     acl:agent </profile/card#me>;\r\n      //     acl:agent <https://bourgeoa.solidcommunity.net/profile/card#me>;\r\n      //     acl:mode acl:Read, acl:Write, acl:Control.\r\n\r\n      //       @prefix : <#>.\r\n      // @prefix acl: <http://www.w3.org/ns/auth/acl#>.\r\n      // @prefix foaf: <http://xmlns.com/foaf/0.1/>.\r\n      // @prefix target: <./>.\r\n      //\r\n      // :ReadAppend\r\n      //     a acl:Authorization;\r\n      //     acl:accessTo target:;\r\n      //     acl:agentClass acl:AuthenticatedAgent;\r\n      //     acl:mode acl:Read, acl:Append.\r\n      //\r\n      // :ReadWriteControl\r\n      //     a acl:Authorization;\r\n      //     acl:accessTo target:;\r\n      //     acl:agent </profile/card#me>;\r\n      //     acl:mode acl:Read, acl:Write, acl:Control.\r\n\r\n\r\n      if (this.webId != null){\r\n        let inboxFolder = await ldflex.data.from(this.webId)[this.webId]['http://www.w3.org/ns/ldp#inbox']\r\n        let inboxAnnonce = `${inboxFolder}`+\"annonces/\"\r\n        if( !(await fc.itemExists(inboxAnnonce)) ) {\r\n          await fc.createFolder(inboxAnnonce) // only create if it doesn't already exist\r\n        }\r\n\r\n        let aclObject = await fc.aclUrlParser(inboxAnnonce)\r\n        console.log(\"inherit acl\",aclObject)\r\n        let aclContent = await fc.acl.createContent(inboxAnnonce, aclObject/*, options*/)\r\n        console.log(aclContent)\r\n\r\n        // add an other rule\r\n        let   aclUsers = await fc.acl.addUserMode({}, [{ agent: this.webId }], ['Read', 'Write', 'Control'], ['accessTo', 'default'])\r\n        aclUsers = await fc.acl.addUserMode(aclUsers, [{ agentClass: 'AuthenticatedAgent' }], ['Append'], ['default'])\r\n        aclUsers = await fc.acl.addUserMode(aclUsers, [{ agentClass: 'Agent' }], ['Append', 'Read'], ['accessTo'])\r\n\r\n        //      aclUsers = await fc.acl.addUserMode(aclUsers, [{ agent: 'https://bourgeoa.solidcommunity.net/profile/card#me' }], ['Read', 'Write', 'Control'], ['accessTo', 'default'])\r\n\r\n\r\n        //  let aclUsers = await fc.acl.addUserMode({}, [{ agentClass: 'AuthenticatedAgent'}], ['Read', 'Write'])\r\n        const aclContentNew = await fc.acl.createContent(inboxAnnonce, aclUsers)\r\n        console.log('build an aclContent ' + aclContentNew)\r\n\r\n        const { acl: aclUrl } = await fc.getItemLinks(inboxAnnonce, { links: 'include_possible'})\r\n        //    const links = await fc.getItemLinks(inboxAnnonce, { links: 'include_possible'})\r\n\r\n        //  console.log(links)\r\n        let result = await fc.putFile(aclUrl, aclContentNew, 'text/turtle')\r\n        console.log(\"result\",result)\r\n\r\n\r\n        let folder = await fc.readFolder(inboxAnnonce)\r\n        console.log(folder)\r\n        let files = folder.files.sort((a,b) => new Date(b.created).getTime() - new Date(a.created).getTime());\r\n        // console.log(files)\r\n        this.messages = []\r\n        //\r\n        while ( files.length > 0){\r\n          let f = files.shift()\r\n          let m = await JSON.parse(await fc.readFile(f.url))\r\n          m.url = f.url\r\n          this.messages.push(m)\r\n          //  console.log(this.messages)\r\n          //  console.log(f)\r\n          // let resource = f.url+\"#this\"\r\n          // for await (const annonce_url of ldflex.data[resource]['http://purl.org/dc/terms/hasPart']){\r\n          //   let idx = this.annonces.findIndex(x => x.url === `${annonce_url}`)\r\n          //   if (idx === -1) {\r\n          //     this.annonces.push({url: `${annonce_url}`})\r\n          //   }\r\n          // }\r\n        }\r\n      }\r\n    },\r\n    async onDelete(){\r\n      console.log(\"delete\")\r\n      await fc.deleteFile(this.urlToDelete)\r\n      this.readInbox()\r\n      //this.$store.dispatch('annonce/delete', this.idToDelete)\r\n    },\r\n    showDeleteConfirm(m){\r\n      this.deleteMessage= \"Do you want to delete <b>\"+m.url+\"</b>\"\r\n      this.urlToDelete = m.url\r\n    },\r\n  },\r\n  watch:{\r\n    webId(){\r\n      this.readInbox()\r\n    }\r\n  },\r\n  computed:{\r\n    webId() {\r\n      return this.$store.state.solid.webId\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/annonce"}]}