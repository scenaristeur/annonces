{"map":{"version":3,"sources":["js/chunk-2d224d23.fa49173d.js"],"names":["window","push","e288","module","__webpack_exports__","__webpack_require__","r","render","_vm","this","_h","$createElement","_c","_self","_v","_s","messages","length","_l","m","key","url","created","creator","annonce","title","text","staticStyle","margin-left","attrs","variant","on","click","$event","reply","icon","directives","name","rawName","modifiers","message-delete","showDeleteConfirm","id","centered","ok","onDelete","staticClass","domProps","innerHTML","deleteMessage","staticRenderFns","asyncToGenerator","browser","browser_default","n","solid_file_client_bundle","solid_file_client_bundle_default","fc","a","ldflex","solid","AnnonceInboxvue_type_script_lang_js_","data","_this","Object","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","readInbox","stop","methods","_this2","_callee2","inboxFolder","inboxAnnonce","aclObject","aclContent","aclUsers","aclContentNew","_yield$fc$getItemLink","aclUrl","result","folder","files","f","_context2","webId","from","sent","concat","itemExists","createFolder","aclUrlParser","console","log","acl","createContent","addUserMode","agent","agentClass","getItemLinks","links","putFile","readFolder","sort","b","Date","getTime","shift","t0","JSON","readFile","t1","parse","call","_this3","_callee3","_context3","deleteFile","urlToDelete","watch","computed","$store","state","annonce_AnnonceInboxvue_type_script_lang_js_","componentNormalizer","component"],"mappings":"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"},"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d224d23\"],{e288:function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"b-list-group\",[e._v(\" INBOX ( \"+e._s(e.messages.length)+\" messages ) \"),e._l(e.messages,(function(t){return n(\"b-list-group-item\",{key:t.url},[e._v(\" \"+e._s(t.created)+\" / \"+e._s(t.creator)+\" : \"),n(\"b\",[e._v(e._s(t.annonce.title))]),e._v(\" ::: \"+e._s(t.text)+\" \"),n(\"b-button\",{staticStyle:{\"margin-left\":\"auto\"},attrs:{variant:\"light\"},on:{click:function(n){return e.reply(t)}}},[n(\"b-icon\",{attrs:{icon:\"pen\"}})],1),n(\"b-button\",{directives:[{name:\"b-modal\",rawName:\"v-b-modal.message-delete\",modifiers:{\"message-delete\":!0}}],staticStyle:{\"margin-left\":\"auto\"},attrs:{variant:\"danger\"},on:{click:function(n){return e.showDeleteConfirm(t)}}},[n(\"b-icon\",{attrs:{icon:\"trash\"}})],1)],1)})),n(\"b-modal\",{attrs:{id:\"message-delete\",centered:\"\",title:\"Delete\"},on:{ok:e.onDelete}},[n(\"div\",{staticClass:\"p-3\",domProps:{innerHTML:e._s(e.deleteMessage)}})])],2)},s=[],a=n(\"1da1\"),o=(n(\"96cf\"),n(\"00e8\")),c=n.n(o),l=n(\"7fed\"),i=n.n(l),u=new i.a(c.a),d=window.solid,b={name:\"AnnonceInbox\",data:function(){return{messages:[],deleteMessage:\"\"}},created:function(){var e=this;return Object(a[\"a\"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.readInbox();case 1:case\"end\":return t.stop()}}),t)})))()},methods:{readInbox:function(){var e=this;return Object(a[\"a\"])(regeneratorRuntime.mark((function t(){var n,r,s,a,o,c,l,i,b,g,m,w,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e.webId){t.next=55;break}return t.next=3,d.data.from(e.webId)[e.webId][\"http://www.w3.org/ns/ldp#inbox\"];case 3:return n=t.sent,r=\"\".concat(n)+\"annonces/\",t.next=7,u.itemExists(r);case 7:if(t.sent){t.next=10;break}return t.next=10,u.createFolder(r);case 10:return t.next=12,u.aclUrlParser(r);case 12:return s=t.sent,console.log(\"inherit acl\",s),t.next=16,u.acl.createContent(r,s);case 16:return a=t.sent,console.log(a),t.next=20,u.acl.addUserMode({},[{agent:e.webId}],[\"Read\",\"Write\",\"Control\"],[\"accessTo\"]);case 20:return o=t.sent,t.next=23,u.acl.addUserMode(o,[{agentClass:\"AuthenticatedAgent\"}],[\"Append\",\"Read\"],[\"accessTo\"]);case 23:return o=t.sent,t.next=26,u.acl.createContent(r,o);case 26:return c=t.sent,console.log(\"build an aclContent \"+c),t.next=30,u.getItemLinks(r,{links:\"include_possible\"});case 30:return l=t.sent,i=l.acl,t.next=34,u.putFile(i,c,\"text/turtle\");case 34:return b=t.sent,console.log(\"result\",b),t.next=38,u.readFolder(r);case 38:g=t.sent,console.log(g),m=g.files.sort((function(e,t){return new Date(t.created).getTime()-new Date(e.created).getTime()})),e.messages=[];case 42:if(!(m.length>0)){t.next=55;break}return w=m.shift(),t.t0=JSON,t.next=47,u.readFile(w.url);case 47:return t.t1=t.sent,t.next=50,t.t0.parse.call(t.t0,t.t1);case 50:f=t.sent,f.url=w.url,e.messages.push(f),t.next=42;break;case 55:case\"end\":return t.stop()}}),t)})))()},onDelete:function(){var e=this;return Object(a[\"a\"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(\"delete\"),t.next=3,u.deleteFile(e.urlToDelete);case 3:e.readInbox();case 4:case\"end\":return t.stop()}}),t)})))()},showDeleteConfirm:function(e){this.deleteMessage=\"Do you want to delete <b>\"+e.url+\"</b>\",this.urlToDelete=e.url}},watch:{webId:function(){this.readInbox()}},computed:{webId:function(){return this.$store.state.solid.webId}}},g=b,m=n(\"2877\"),w=Object(m[\"a\"])(g,r,s,!1,null,null,null);t[\"default\"]=w.exports}}]);","extractedComments":[]}